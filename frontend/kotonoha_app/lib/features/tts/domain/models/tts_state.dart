/// TTS読み上げ状態の定義
///
/// TASK-0048: OS標準TTS連携（flutter_tts）
/// 読み上げの状態遷移を管理
///
/// 【機能概要】: OS標準TTSエンジンの読み上げ状態を表現する列挙型
/// 【設計方針】: 状態遷移を明確にし、UI側での状態に応じた表示制御を容易にする
/// 【保守性】: 状態の追加・変更は列挙型の拡張で対応可能
library;

/// TTS読み上げ状態
///
/// 参照: requirements.md（168-176行目）
///
/// 【状態遷移フロー】:
/// ```
/// idle → speaking → completed → idle  (正常終了)
/// idle → speaking → stopped → idle    (ユーザーによる停止)
/// idle → speaking → error → idle      (エラー発生)
/// ```
///
/// 【UI表示への影響】:
/// - idle: 読み上げボタン有効、停止ボタン無効
/// - speaking: 読み上げボタン無効、停止ボタン有効
/// - stopped/completed/error: idle状態へ自動遷移
///
/// 🔵 信頼性レベル: 高（要件定義書ベース）
enum TTSState {
  /// アイドル状態（初期状態、読み上げ完了後）
  ///
  /// 【状態の意味】: TTSエンジンが待機中で、新しい読み上げを受け付け可能
  /// 【遷移元】: アプリ起動時、completed、stopped、error
  /// 【遷移先】: speaking
  idle,

  /// 読み上げ中
  ///
  /// 【状態の意味】: TTSエンジンがテキストを読み上げ中
  /// 【遷移元】: idle
  /// 【遷移先】: completed、stopped、error
  /// 【UI動作】: 停止ボタンを表示、読み上げボタンを無効化
  speaking,

  /// 停止
  ///
  /// 【状態の意味】: ユーザーの操作により読み上げが停止された
  /// 【遷移元】: speaking
  /// 【遷移先】: idle（自動遷移）
  /// 【用途】: ユーザーが読み上げを中断した場合
  stopped,

  /// 完了
  ///
  /// 【状態の意味】: 読み上げが正常に完了した
  /// 【遷移元】: speaking
  /// 【遷移先】: idle（自動遷移）
  /// 【用途】: 読み上げが最後まで完了した場合
  completed,

  /// エラー
  ///
  /// 【状態の意味】: 読み上げ中にエラーが発生した
  /// 【遷移元】: idle（初期化失敗）、speaking（読み上げ失敗）
  /// 【遷移先】: idle（エラー処理後）
  /// 【用途】: TTS初期化失敗、読み上げエラー、音量0など
  /// 【NFR-301準拠】: エラー時も基本機能（文字盤+テキスト表示）は継続
  error,
}
