/// TTS読み上げ速度の定義
///
/// TASK-0048: OS標準TTS連携（flutter_tts）
/// TDD-TTS-SLOWER-SPEED: TTS読み上げ速度の追加オプション（より遅い速度の追加）
/// 読み上げ速度の4段階（とても遅い/遅い/普通/速い）を定義
///
/// 【機能概要】: OS標準TTSエンジンの読み上げ速度を制御するための列挙型
/// 【設計方針】: ユーザーが直感的に選択できる4段階の速度設定を提供
/// 【パフォーマンス】: 速度値は定数として提供され、計算コストは最小限
library;

/// TTS読み上げ速度
///
/// REQ-404: 読み上げ速度を「とても遅い」「遅い」「普通」「速い」の4段階から選択できる
/// (元の要件を拡張: 3段階 → 4段階)
///
/// 【使用シーン】:
/// - ユーザーが設定画面で読み上げ速度を変更する場合
/// - デフォルトの読み上げ速度を設定する場合（normal）
///
/// 【速度の選定理由】:
/// - verySlow (0.5): 聞き取りが難しいユーザー向け（高齢者、聴覚に配慮が必要な方）🔵
/// - slow (0.7): 高齢者や聴覚に配慮が必要なユーザー向け
/// - normal (1.0): 標準的な読み上げ速度
/// - fast (1.3): 慣れたユーザー向けの高速読み上げ
enum TTSSpeed {
  /// とても遅い（0.5倍速）🆕
  ///
  /// 【用途】: 聞き取りが難しいユーザー向け
  /// 【対象ユーザー】: 高齢者、聴覚に配慮が必要な方、介護者・支援者
  /// 【テスト対応】: TTC-VS-001、TTC-VS-002、TTC-VS-009
  /// 🔵 信頼性レベル: 高（要件定義書ベース）
  verySlow,

  /// 遅い（0.7倍速）
  ///
  /// 【用途】: 聞き取りやすさを重視する場合
  /// 【対象ユーザー】: 高齢者、初めて使用するユーザー
  slow,

  /// 普通（1.0倍速、デフォルト）
  ///
  /// 【用途】: 標準的な読み上げ速度
  /// 【対象ユーザー】: 一般的なユーザー
  normal,

  /// 速い（1.3倍速）
  ///
  /// 【用途】: 効率的なコミュニケーションを重視する場合
  /// 【対象ユーザー】: アプリに慣れたユーザー
  fast,
}

/// TTSSpeed拡張メソッド
///
/// 【機能概要】: TTSSpeed列挙型に速度値（double）を取得するゲッターを追加
/// 【設計方針】: 列挙型の値をflutter_ttsが要求するdouble型に変換
/// 【保守性】: 速度値の変更は拡張メソッド内で一元管理
extension TTSSpeedExtension on TTSSpeed {
  /// 速度値を取得
  ///
  /// 【返却値】:
  /// - verySlow: 0.5 - 聞き取りが難しいユーザー向け 🆕
  /// - slow: 0.7 - 聞き取りやすさ重視
  /// - normal: 1.0 - 標準速度
  /// - fast: 1.3 - 効率性重視
  ///
  /// 【制約】:
  /// - 返却値は0.0〜1.0の範囲内（iOS: flutter_ttsの仕様）
  /// - 返却値は0.0〜2.0の範囲内（Android: flutter_ttsの仕様）
  /// - 現在の実装では0.5〜1.3の範囲で設定
  ///
  /// 参照: interfaces.dart（298-319行目）、requirements.md（148-158行目）
  /// 🔵 信頼性レベル: 高（要件定義書ベース）
  double get value {
    switch (this) {
      case TTSSpeed.verySlow:
        // 【速度設定】: 0.5倍速 - 聞き取りが難しいユーザー向け 🆕
        // 【テスト対応】: TTC-VS-001、TTC-VS-009、TTC-VS-010
        // 🔵 信頼性レベル: 高（要件定義書ベース - 0.5倍速と明記）
        return 0.5;
      case TTSSpeed.slow:
        // 【速度設定】: 0.7倍速 - 聞き取りやすさを優先
        return 0.7;
      case TTSSpeed.normal:
        // 【速度設定】: 1.0倍速 - 標準的な読み上げ速度
        return 1.0;
      case TTSSpeed.fast:
        // 【速度設定】: 1.3倍速 - 効率的なコミュニケーション
        return 1.3;
    }
  }
}
