# TASK-0075: ヘルプ画面・初回チュートリアル - 要件定義

## タスク概要

- **タスクID**: TASK-0075
- **タスク名**: ヘルプ画面・初回チュートリアル実装
- **関連要件**: REQ-3001, NFR-205
- **依存タスク**: TASK-0071

## 関連要件（EARS記法）

### REQ-3001: 初回チュートリアル表示 🟡

**EARS記法**: Event-driven
> アプリが初回起動時の状態にある場合、システムは簡易チュートリアルまたはヘルプ画面を表示しなければならない

**受け入れ基準**:
- 初回起動時にチュートリアルオーバーレイが自動表示される
- チュートリアルは複数ステップで基本操作を説明する
- 「次へ」ボタンで次のステップに進める
- 「スキップ」ボタンでいつでも終了できる
- 最後のステップで「はじめる」ボタンが表示される
- チュートリアル完了フラグがSharedPreferencesに保存される
- 2回目以降の起動ではチュートリアルは表示されない

### NFR-205: 誤操作防止設定の説明 🔵

**EARS記法**: Ubiquitous
> システムは「ガイド付きアクセス」(iOS)や「画面ピン留め」(Android)の設定方法をアプリ内ヘルプで説明しなければならない

**受け入れ基準**:
- ヘルプ画面に「誤操作防止の設定」セクションが存在する
- iOSのガイド付きアクセスの設定方法が説明されている
- Androidの画面ピン留めの設定方法が説明されている
- 説明は日本語で分かりやすく記載されている

## 機能要件

### 1. ヘルプ画面（HelpScreen）

| 要件ID | 説明 | 優先度 |
|--------|------|--------|
| HELP-001 | ヘルプ画面が「使い方」タイトルで表示される | 高 |
| HELP-002 | 基本操作セクション（文字盤、定型文、TTS）が表示される | 高 |
| HELP-003 | 緊急ボタンの使い方が説明される | 高 |
| HELP-004 | 誤操作防止設定セクションが表示される（NFR-205） | 高 |
| HELP-005 | iOSガイド付きアクセスの設定方法が説明される | 高 |
| HELP-006 | Android画面ピン留めの設定方法が説明される | 高 |
| HELP-007 | コンテンツがスクロール可能である | 中 |
| HELP-008 | 戻るボタンで前の画面に戻れる | 高 |
| HELP-009 | アクセシビリティ対応（Semantics設定） | 中 |

### 2. チュートリアルオーバーレイ（TutorialOverlay）

| 要件ID | 説明 | 優先度 |
|--------|------|--------|
| TUT-001 | オーバーレイが子ウィジェットの上に表示される | 高 |
| TUT-002 | ウェルカムメッセージ（ステップ1）が表示される | 高 |
| TUT-003 | 文字盤の説明（ステップ2）が表示される | 高 |
| TUT-004 | 定型文の説明（ステップ3）が表示される | 高 |
| TUT-005 | 読み上げ機能の説明（ステップ4）が表示される | 高 |
| TUT-006 | 準備完了メッセージ（ステップ5）が表示される | 高 |
| TUT-007 | 「次へ」ボタンで次のステップに進める | 高 |
| TUT-008 | 「スキップ」ボタンでいつでも終了できる | 高 |
| TUT-009 | 最後のステップで「はじめる」ボタンが表示される | 高 |
| TUT-010 | ステップインジケーター（ドット表示）が表示される | 中 |
| TUT-011 | 完了時にonCompleteコールバックが呼ばれる | 高 |

### 3. チュートリアル状態管理（TutorialProvider）

| 要件ID | 説明 | 優先度 |
|--------|------|--------|
| PROV-001 | 初回起動時はチュートリアル未完了状態 | 高 |
| PROV-002 | チュートリアル完了後にフラグがtrueになる | 高 |
| PROV-003 | 完了フラグがSharedPreferencesに保存される | 高 |
| PROV-004 | アプリ再起動後も完了状態が維持される | 高 |
| PROV-005 | リセット機能（テスト用） | 低 |

## 非機能要件

| 要件ID | 説明 | 基準値 |
|--------|------|--------|
| NFR-HELP-001 | ヘルプ画面の初期表示 | 1秒以内 |
| NFR-HELP-002 | チュートリアルのステップ切り替え | 即座（100ms以内） |
| NFR-HELP-003 | SharedPreferences保存 | 非同期、UIをブロックしない |

## 信頼性レベル

- 🔵 **青信号**: NFR-205（ガイド付きアクセス/画面ピン留め説明）- 要件定義書に明記
- 🟡 **黄信号**: REQ-3001（初回チュートリアル）- 要件概要から推測
