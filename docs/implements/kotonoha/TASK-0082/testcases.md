# TASK-0082 文字入力・読み上げE2Eテスト テストケース一覧

## 概要

- **タスクID**: TASK-0082
- **タスク名**: 文字入力・読み上げE2Eテスト
- **作成日時**: 2025-11-29
- **テストケース総数**: 17件
  - 正常系: 6件
  - 異常系: 2件
  - 境界値: 4件
  - パフォーマンス: 3件
  - 統合テスト: 2件

## 開発言語・フレームワーク

- **プログラミング言語**: Dart
  - **言語選択の理由**: FlutterアプリのネイティブE2Eテストを行うため
  - **テストに適した機能**: 非同期処理、強い型付け
- **テストフレームワーク**: integration_test (Flutter公式E2Eテストフレームワーク)
  - **フレームワーク選択の理由**: Flutter公式で推奨、ウィジェットテストと統合
  - **テスト実行環境**: Chrome（Web）、iOS/Androidエミュレータ/実機
- 🔵 この内容の信頼性レベル: docs/tech-stack.md に基づく

---

## 1. 正常系テストケース（基本的な動作）

### TC-E2E-082-001: 文字盤で「こんにちは」を入力できる

- **テスト名**: 文字盤からの基本文字入力テスト
  - **何をテストするか**: 五十音文字盤から文字をタップして入力欄に文字が追加される動作
  - **期待される動作**: 「こんにちは」の各文字をタップすると、入力欄に順番通りに文字が追加される
- **入力値**: 文字盤の「こ」「ん」「に」「ち」「は」を順番にタップ
  - **入力データの意味**: 一般的なあいさつ文字列で、複数文字の順次入力をテスト
- **期待される結果**: 入力欄に「こんにちは」が表示される
  - **期待結果の理由**: REQ-002で定義された「文字タップで入力欄に文字追加」の基本機能
- **テストの目的**: 文字盤入力の基本機能確認
  - **確認ポイント**: 文字の順序、入力漏れがないこと
- 🔵 青信号: REQ-002に基づく基本機能テスト

```dart
// 【テスト目的】: 文字盤から複数文字を入力して入力欄に正しく反映されるか確認
// 【テスト内容】: 五十音文字盤の「こ」「ん」「に」「ち」「は」を順番にタップ
// 【期待される動作】: 入力欄に「こんにちは」が表示される
testWidgets('TC-E2E-082-001: 文字盤で「こんにちは」を入力できる', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【実際の処理実行】: 文字盤で「こんにちは」を入力
  await typeOnCharacterBoard(tester, 'こんにちは');

  // 【結果検証】: 入力欄に正しい文字列が表示されること
  expect(find.text('こんにちは'), findsOneWidget);
});
```

---

### TC-E2E-082-002: 入力後に読み上げボタンをタップしてTTSが開始される

- **テスト名**: TTS読み上げ開始テスト
  - **何をテストするか**: 入力欄にテキストがある状態で読み上げボタンをタップしてTTSが開始される動作
  - **期待される動作**: 読み上げボタンタップ後、TTSが開始される
- **入力値**: 「こんにちは」入力後、読み上げボタンをタップ
  - **入力データの意味**: 典型的なユースケースでの読み上げ機能テスト
- **期待される結果**: TTS読み上げが開始される（TTSサービス呼び出しが確認される）
  - **期待結果の理由**: REQ-401で定義された「OS標準TTSで読み上げ」機能
- **テストの目的**: TTS機能の基本動作確認
  - **確認ポイント**: TTSサービスへの呼び出し、UI状態変化
- 🔵 青信号: REQ-401に基づく基本機能テスト

```dart
// 【テスト目的】: 読み上げボタンタップでTTSが開始されるか確認
// 【テスト内容】: テキスト入力後に読み上げボタンをタップ
// 【期待される動作】: TTS読み上げが開始される
testWidgets('TC-E2E-082-002: 入力後に読み上げボタンをタップしてTTSが開始される', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【前提条件設定】: 「こんにちは」を入力
  await typeOnCharacterBoard(tester, 'こんにちは');

  // 【実際の処理実行】: 読み上げボタンをタップ
  await tapButton(tester, '読み上げ');

  // 【結果検証】: TTS読み上げが開始される（ボタンが停止ボタンに変化）
  expect(find.text('停止'), findsOneWidget);
});
```

---

### TC-E2E-082-003: 連続した文字入力が正しく処理される

- **テスト名**: 連続タップ文字入力テスト
  - **何をテストするか**: 高速に連続タップしても文字が抜けずに入力される動作
  - **期待される動作**: 連続タップでも全ての文字が順番通りに追加される
- **入力値**: 「あいうえおかきくけこ」を高速に連続タップ
  - **入力データの意味**: 10文字の連続入力で高速タップ時の安定性をテスト
- **期待される結果**: 入力欄に「あいうえおかきくけこ」が表示される
  - **期待結果の理由**: REQ-002の拡張として連続入力の安定性を確認
- **テストの目的**: 連続入力時の信頼性確認
  - **確認ポイント**: 文字の抜け、順序の乱れがないこと
- 🟡 黄信号: REQ-002から妥当な推測

```dart
// 【テスト目的】: 連続タップで文字が抜けずに入力されるか確認
// 【テスト内容】: 「あいうえおかきくけこ」を連続タップ
// 【期待される動作】: 全ての文字が順番通りに入力される
testWidgets('TC-E2E-082-003: 連続した文字入力が正しく処理される', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【実際の処理実行】: 10文字を連続入力
  await typeOnCharacterBoard(tester, 'あいうえおかきくけこ');

  // 【結果検証】: 全ての文字が正しく入力されていること
  expect(find.text('あいうえおかきくけこ'), findsOneWidget);
});
```

---

### TC-E2E-082-004: 削除ボタンで最後の1文字が削除される

- **テスト名**: 1文字削除テスト
  - **何をテストするか**: 削除ボタンをタップして最後の1文字のみが削除される動作
  - **期待される動作**: 入力欄の最後の1文字のみが削除される
- **入力値**: 「あいう」入力後、削除ボタンをタップ
  - **入力データの意味**: 3文字入力して1文字削除の基本パターン
- **期待される結果**: 入力欄が「あい」になる
  - **期待結果の理由**: REQ-003で定義された「削除ボタンで最後の1文字削除」機能
- **テストの目的**: 削除機能の基本動作確認
  - **確認ポイント**: 最後の1文字のみが削除されること
- 🔵 青信号: REQ-003に基づく基本機能テスト

```dart
// 【テスト目的】: 削除ボタンで最後の1文字のみ削除されるか確認
// 【テスト内容】: 「あいう」入力後に削除ボタンをタップ
// 【期待される動作】: 「あい」になる
testWidgets('TC-E2E-082-004: 削除ボタンで最後の1文字が削除される', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【前提条件設定】: 「あいう」を入力
  await typeOnCharacterBoard(tester, 'あいう');

  // 【実際の処理実行】: 削除ボタンをタップ
  await tapButton(tester, '削除');

  // 【結果検証】: 最後の1文字が削除されて「あい」になること
  expect(find.text('あい'), findsOneWidget);
  expect(find.text('あいう'), findsNothing);
});
```

---

### TC-E2E-082-005: 全消去ボタンで全文字が削除される

- **テスト名**: 全消去テスト（確認ダイアログ承認）
  - **何をテストするか**: 全消去ボタンと確認ダイアログの連携動作
  - **期待される動作**: 確認ダイアログで「はい」を選択すると全文字が削除される
- **入力値**: 「あいうえお」入力後、全消去ボタン→確認ダイアログで「はい」
  - **入力データの意味**: 5文字入力して全削除の典型パターン
- **期待される結果**: 入力欄が空になる
  - **期待結果の理由**: REQ-004で定義された「全消去ボタンで全文字削除」機能
- **テストの目的**: 全消去機能と確認ダイアログの動作確認
  - **確認ポイント**: 確認ダイアログの表示、承認後の削除
- 🔵 青信号: REQ-004、REQ-2001に基づく基本機能テスト

```dart
// 【テスト目的】: 全消去ボタンで全文字が削除されるか確認
// 【テスト内容】: 「あいうえお」入力後に全消去ボタンと確認ダイアログで「はい」
// 【期待される動作】: 入力欄が空になる
testWidgets('TC-E2E-082-005: 全消去ボタンで全文字が削除される', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【前提条件設定】: 「あいうえお」を入力
  await typeOnCharacterBoard(tester, 'あいうえお');

  // 【実際の処理実行】: 全消去ボタンをタップ
  await tapButton(tester, '全消去');

  // 【結果検証】: 確認ダイアログが表示されること
  expect(find.text('全て削除しますか？'), findsOneWidget);

  // 【実際の処理実行】: 確認ダイアログで「はい」を選択
  await tapButton(tester, 'はい');

  // 【結果検証】: 入力欄が空になること
  expect(find.text('あいうえお'), findsNothing);
});
```

---

### TC-E2E-082-006: 読み上げ中に停止ボタンで停止できる

- **テスト名**: TTS停止テスト
  - **何をテストするか**: 読み上げ中に停止ボタンをタップしてTTSが停止される動作
  - **期待される動作**: 停止ボタンタップ後、TTSが停止しボタンが「読み上げ」に戻る
- **入力値**: 長文入力→読み上げ開始→停止ボタンタップ
  - **入力データの意味**: 読み上げ中の停止操作をテスト
- **期待される結果**: TTS読み上げが停止し、ボタンが「読み上げ」に戻る
  - **期待結果の理由**: REQ-403で定義された「読み上げ中の停止・中断機能」
- **テストの目的**: TTS停止機能の動作確認
  - **確認ポイント**: 停止ボタンの表示、停止後のボタン状態
- 🔵 青信号: REQ-403に基づく基本機能テスト

```dart
// 【テスト目的】: 読み上げ中に停止ボタンでTTSが停止するか確認
// 【テスト内容】: 長文入力後に読み上げ開始し、停止ボタンをタップ
// 【期待される動作】: TTS停止、ボタンが「読み上げ」に戻る
testWidgets('TC-E2E-082-006: 読み上げ中に停止ボタンで停止できる', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【前提条件設定】: 長い文字列を入力
  await typeOnCharacterBoard(tester, 'こんにちはありがとうございます');

  // 【実際の処理実行】: 読み上げボタンをタップ
  await tapButton(tester, '読み上げ');

  // 【結果検証】: 停止ボタンが表示されること
  expect(find.text('停止'), findsOneWidget);

  // 【実際の処理実行】: 停止ボタンをタップ
  await tapButton(tester, '停止');

  // 【結果検証】: 読み上げボタンに戻ること
  expect(find.text('読み上げ'), findsOneWidget);
});
```

---

## 2. 異常系テストケース（エラーハンドリング）

### TC-E2E-082-007: 空の入力欄で読み上げボタンをタップしても安全に処理される

- **テスト名**: 空入力欄での読み上げテスト
  - **エラーケースの概要**: 入力欄が空の状態で読み上げボタンをタップした場合
  - **エラー処理の重要性**: ユーザーの誤操作でアプリがクラッシュしてはならない
- **入力値**: 空の入力欄で読み上げボタンをタップ
  - **不正な理由**: 読み上げる内容がない状態での操作
  - **実際の発生シナリオ**: ユーザーが誤って読み上げボタンをタップ
- **期待される結果**: エラーにならず、安全に処理される（何も起こらない、または視覚的フィードバック）
  - **エラーメッセージの内容**: 必要に応じて「入力してください」などの案内
  - **システムの安全性**: アプリがクラッシュしない
- **テストの目的**: 空入力時の防御的プログラミング確認
  - **品質保証の観点**: NFR-301の「重大エラーでも基本機能を継続利用可能」を確認
- 🟡 黄信号: NFR-301から妥当な推測

```dart
// 【テスト目的】: 空の入力欄で読み上げボタンを押してもクラッシュしないか確認
// 【テスト内容】: アプリ起動直後に読み上げボタンをタップ
// 【期待される動作】: エラーにならず安全に処理される
testWidgets('TC-E2E-082-007: 空の入力欄で読み上げボタンをタップしても安全に処理される', (tester) async {
  // 【テストデータ準備】: アプリを初期化（入力欄は空）
  await pumpApp(tester);

  // 【実際の処理実行】: 読み上げボタンをタップ
  await tapButton(tester, '読み上げ');

  // 【結果検証】: アプリがクラッシュしないこと
  // （pumpAndSettleが正常終了することで確認）
  await tester.pumpAndSettle();

  // 【結果検証】: ホーム画面が引き続き表示されること
  expect(find.text('kotonoha'), findsOneWidget);
});
```

---

### TC-E2E-082-008: 全消去確認ダイアログでキャンセルすると内容が保持される

- **テスト名**: 全消去キャンセルテスト
  - **エラーケースの概要**: 全消去の確認ダイアログで「いいえ」を選択した場合
  - **エラー処理の重要性**: 誤操作防止のための確認ダイアログが正しく機能する必要がある
- **入力値**: 「あいうえお」入力後、全消去ボタン→確認ダイアログで「いいえ」
  - **不正な理由**: ユーザーが全消去を取り消したい場合
  - **実際の発生シナリオ**: 誤って全消去ボタンを押したユーザーがキャンセル
- **期待される結果**: 入力欄の内容が保持される
  - **エラーメッセージの内容**: なし（正常処理）
  - **システムの安全性**: 誤操作からデータを保護
- **テストの目的**: 誤操作防止機能の動作確認
  - **品質保証の観点**: REQ-5002の「誤操作防止の仕組み」を確認
- 🔵 青信号: REQ-5002に基づく基本機能テスト

```dart
// 【テスト目的】: 全消去確認ダイアログで「いいえ」選択時に内容が保持されるか確認
// 【テスト内容】: 「あいうえお」入力後に全消去→確認ダイアログで「いいえ」
// 【期待される動作】: 入力欄の内容が保持される
testWidgets('TC-E2E-082-008: 全消去確認ダイアログでキャンセルすると内容が保持される', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【前提条件設定】: 「あいうえお」を入力
  await typeOnCharacterBoard(tester, 'あいうえお');

  // 【実際の処理実行】: 全消去ボタンをタップ
  await tapButton(tester, '全消去');

  // 【結果検証】: 確認ダイアログが表示されること
  expect(find.text('全て削除しますか？'), findsOneWidget);

  // 【実際の処理実行】: 確認ダイアログで「いいえ」を選択
  await tapButton(tester, 'いいえ');

  // 【結果検証】: 入力欄の内容が保持されること
  expect(find.text('あいうえお'), findsOneWidget);
});
```

---

## 3. 境界値テストケース（最小値、最大値、null等）

### TC-E2E-082-009: 1文字だけ入力して読み上げができる

- **テスト名**: 最小入力（1文字）テスト
  - **境界値の意味**: 入力可能な最小単位での動作確認
  - **境界値での動作保証**: 1文字でも正常に読み上げられること
- **入力値**: 「あ」のみを入力して読み上げ
  - **境界値選択の根拠**: 最小の入力単位
  - **実際の使用場面**: 短い返事（「あ」「え」など）
- **期待される結果**: TTS読み上げが開始される
  - **境界での正確性**: 1文字でもTTSが正常動作すること
  - **一貫した動作**: 複数文字と同じフローで動作すること
- **テストの目的**: 最小入力での動作確認
  - **堅牢性の確認**: 極端に短い入力でも正常動作すること
- 🟡 黄信号: 最小値境界テストとして妥当な推測

```dart
// 【テスト目的】: 1文字だけ入力して読み上げできるか確認
// 【テスト内容】: 「あ」のみを入力して読み上げボタンをタップ
// 【期待される動作】: TTS読み上げが開始される
testWidgets('TC-E2E-082-009: 1文字だけ入力して読み上げができる', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【前提条件設定】: 「あ」のみを入力
  await tapCharacterOnBoard(tester, 'あ');

  // 【結果検証】: 入力欄に「あ」が表示されること
  expect(find.text('あ'), findsWidgets);

  // 【実際の処理実行】: 読み上げボタンをタップ
  await tapButton(tester, '読み上げ');

  // 【結果検証】: TTS読み上げが開始される（停止ボタン表示）
  expect(find.text('停止'), findsOneWidget);
});
```

---

### TC-E2E-082-010: 1000文字の入力と読み上げができる

- **テスト名**: 最大入力（1000文字）テスト
  - **境界値の意味**: 入力可能な最大文字数での動作確認
  - **境界値での動作保証**: 最大文字数でも正常に動作すること
- **入力値**: 1000文字を入力して読み上げ
  - **境界値選択の根拠**: EDGE-101で定義された最大文字数
  - **実際の使用場面**: 長文メッセージの入力
- **期待される結果**: 1000文字が入力され、TTS読み上げが開始される
  - **境界での正確性**: 1000文字目まで正確に入力されること
  - **一貫した動作**: パフォーマンスが維持されること
- **テストの目的**: 最大入力での動作確認
  - **堅牢性の確認**: 大量データでも正常動作すること
- 🟡 黄信号: EDGE-101から妥当な推測

```dart
// 【テスト目的】: 1000文字入力して読み上げできるか確認
// 【テスト内容】: 1000文字を入力して読み上げボタンをタップ
// 【期待される動作】: 1000文字入力と読み上げが正常動作
testWidgets('TC-E2E-082-010: 1000文字の入力と読み上げができる', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【前提条件設定】: 1000文字を入力（「あ」を1000回）
  final longText = 'あ' * 1000;
  // 実際の実装ではtypeOnCharacterBoardを使用するか、
  // テスト用に入力欄を直接操作する

  // 【結果検証】: 1000文字が入力されていること
  // expect(find.text(longText), findsOneWidget);

  // 【実際の処理実行】: 読み上げボタンをタップ
  await tapButton(tester, '読み上げ');

  // 【結果検証】: TTS読み上げが開始される
  expect(find.text('停止'), findsOneWidget);
});
```

---

### TC-E2E-082-011: 1001文字目の入力が制限される

- **テスト名**: 文字数制限（1001文字目）テスト
  - **境界値の意味**: 最大文字数を超えた場合の制限動作確認
  - **境界値での動作保証**: 1001文字目以降は入力されないこと
- **入力値**: 1000文字入力後、さらに1文字をタップ
  - **境界値選択の根拠**: EDGE-101の制限を超える値
  - **実際の使用場面**: ユーザーが長文を入力し続けた場合
- **期待される結果**: 1001文字目は入力されず、警告が表示される
  - **境界での正確性**: 制限が正確に1000文字で機能すること
  - **一貫した動作**: 警告表示とともに安全に処理されること
- **テストの目的**: 文字数制限の動作確認
  - **堅牢性の確認**: 制限超過時も安全に処理されること
- 🟡 黄信号: EDGE-101から妥当な推測

```dart
// 【テスト目的】: 1001文字目の入力が制限されるか確認
// 【テスト内容】: 1000文字入力後にさらに1文字をタップ
// 【期待される動作】: 1001文字目は入力されず、警告が表示される
testWidgets('TC-E2E-082-011: 1001文字目の入力が制限される', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【前提条件設定】: 1000文字を入力済み状態を準備
  // （テスト用にProviderを上書きして初期状態を設定）

  // 【実際の処理実行】: さらに1文字をタップ
  await tapCharacterOnBoard(tester, 'あ');

  // 【結果検証】: 1001文字目が入力されていないこと
  // 【結果検証】: 警告メッセージが表示されること
  expect(find.text('1000文字以内'), findsOneWidget);
});
```

---

### TC-E2E-082-012: 削除ボタン連打で空になった後も安全に処理される

- **テスト名**: 削除ボタン境界テスト（空状態での連打）
  - **境界値の意味**: 入力欄が空になった後の削除操作の安全性
  - **境界値での動作保証**: 空状態での削除ボタンがエラーにならないこと
- **入力値**: 「あ」入力後、削除ボタンを2回タップ
  - **境界値選択の根拠**: 空状態を超えた削除操作
  - **実際の使用場面**: ユーザーが削除ボタンを連打した場合
- **期待される結果**: エラーにならず、入力欄が空の状態を維持
  - **境界での正確性**: 空状態で安全に処理されること
  - **一貫した動作**: クラッシュやエラーが発生しないこと
- **テストの目的**: 削除ボタンの境界動作確認
  - **堅牢性の確認**: 連打しても安全に処理されること
- 🟡 黄信号: 防御的プログラミングから妥当な推測

```dart
// 【テスト目的】: 削除ボタン連打で空になった後も安全に処理されるか確認
// 【テスト内容】: 「あ」入力後に削除ボタンを2回タップ
// 【期待される動作】: エラーにならず、空の状態を維持
testWidgets('TC-E2E-082-012: 削除ボタン連打で空になった後も安全に処理される', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【前提条件設定】: 「あ」を入力
  await tapCharacterOnBoard(tester, 'あ');

  // 【実際の処理実行】: 削除ボタンを1回タップ（空になる）
  await tapButton(tester, '削除');

  // 【実際の処理実行】: 削除ボタンをもう1回タップ（空状態で）
  await tapButton(tester, '削除');

  // 【結果検証】: アプリがクラッシュしないこと
  await tester.pumpAndSettle();

  // 【結果検証】: ホーム画面が引き続き表示されること
  expect(find.text('kotonoha'), findsOneWidget);
});
```

---

## 4. パフォーマンステストケース

### TC-E2E-082-013: 文字盤タップ応答が100ms以内

- **テスト名**: 文字盤タップ応答時間テスト
  - **何をテストするか**: 文字盤タップから入力欄更新までの応答時間
  - **期待される動作**: 100ms以内に入力欄が更新される
- **入力値**: 文字盤の「あ」をタップ
  - **入力データの意味**: 単一タップの応答時間計測
- **期待される結果**: タップから入力欄更新まで100ms以内
  - **期待結果の理由**: NFR-003で定義された「文字盤タップ応答100ms以内」
- **テストの目的**: パフォーマンス要件の確認
  - **確認ポイント**: Stopwatchによる正確な時間計測
- 🔵 青信号: NFR-003に基づくパフォーマンステスト

```dart
// 【テスト目的】: 文字盤タップ応答が100ms以内か確認
// 【テスト内容】: 文字盤の「あ」をタップして応答時間を計測
// 【期待される動作】: 100ms以内に入力欄が更新される
testWidgets('TC-E2E-082-013: 文字盤タップ応答が100ms以内', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【実際の処理実行】: パフォーマンス計測
  await measurePerformance(
    '文字盤タップ応答',
    maxMilliseconds: 100,
    action: () async {
      await tapCharacterOnBoard(tester, 'あ');
    },
  );

  // 【結果検証】: 入力欄に「あ」が表示されること
  expect(find.text('あ'), findsWidgets);
});
```

---

### TC-E2E-082-014: TTS読み上げ開始が1秒以内

- **テスト名**: TTS読み上げ開始時間テスト
  - **何をテストするか**: 読み上げボタンタップからTTS開始までの時間
  - **期待される動作**: 1秒以内にTTS読み上げが開始される
- **入力値**: 「こんにちは」入力後、読み上げボタンタップ
  - **入力データの意味**: 典型的な使用シナリオでの時間計測
- **期待される結果**: 読み上げボタンタップから1秒以内にTTS開始
  - **期待結果の理由**: NFR-001で定義された「TTS読み上げ開始1秒以内」
- **テストの目的**: パフォーマンス要件の確認
  - **確認ポイント**: Stopwatchによる正確な時間計測
- 🔵 青信号: NFR-001に基づくパフォーマンステスト

```dart
// 【テスト目的】: TTS読み上げ開始が1秒以内か確認
// 【テスト内容】: 「こんにちは」入力後に読み上げボタンタップして時間計測
// 【期待される動作】: 1秒以内にTTS読み上げが開始される
testWidgets('TC-E2E-082-014: TTS読み上げ開始が1秒以内', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【前提条件設定】: 「こんにちは」を入力
  await typeOnCharacterBoard(tester, 'こんにちは');

  // 【実際の処理実行】: パフォーマンス計測
  await measurePerformance(
    'TTS読み上げ開始',
    maxMilliseconds: 1000,
    action: () async {
      await tapButton(tester, '読み上げ');
      // 停止ボタン表示でTTS開始を確認
      await waitForWidget(tester, find.text('停止'));
    },
  );
});
```

---

### TC-E2E-082-015: 連続10回タップの応答が安定（すべて100ms以内）

- **テスト名**: 連続タップ応答安定性テスト
  - **何をテストするか**: 連続タップ時の応答時間の安定性
  - **期待される動作**: 10回の連続タップすべてが100ms以内で応答
- **入力値**: 「あいうえおかきくけこ」を連続タップ
  - **入力データの意味**: 連続操作時のパフォーマンス安定性確認
- **期待される結果**: 各タップの応答時間がすべて100ms以内
  - **期待結果の理由**: NFR-003の連続操作時の安定性確認
- **テストの目的**: パフォーマンス安定性の確認
  - **確認ポイント**: 連続操作でも応答が劣化しないこと
- 🟡 黄信号: NFR-003から連続操作の安定性として妥当な推測

```dart
// 【テスト目的】: 連続10回タップの応答が安定しているか確認
// 【テスト内容】: 10文字を連続タップして各応答時間を計測
// 【期待される動作】: すべてのタップが100ms以内で応答
testWidgets('TC-E2E-082-015: 連続10回タップの応答が安定（すべて100ms以内）', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【実際の処理実行】: 10文字を連続タップして各応答時間を計測
  final characters = ['あ', 'い', 'う', 'え', 'お', 'か', 'き', 'く', 'け', 'こ'];
  for (final char in characters) {
    await measurePerformance(
      '連続タップ応答 ($char)',
      maxMilliseconds: 100,
      action: () async {
        await tapCharacterOnBoard(tester, char);
      },
    );
  }

  // 【結果検証】: 全文字が正しく入力されていること
  expect(find.text('あいうえおかきくけこ'), findsOneWidget);
});
```

---

## 5. 統合テストケース

### TC-E2E-082-016: 文字入力→読み上げ→履歴保存の一連フローが正常動作

- **テスト名**: 文字入力・読み上げ・履歴保存統合テスト
  - **何をテストするか**: 基本的なユーザーフローの統合動作
  - **期待される動作**: 文字入力→読み上げ→履歴に自動保存の一連フロー
- **入力値**: 「こんにちは」入力→読み上げ→履歴画面確認
  - **入力データの意味**: 典型的なユーザーシナリオ
- **期待される結果**: 読み上げ後に履歴に「こんにちは」が保存される
  - **期待結果の理由**: REQ-601の「履歴をローカル端末内に保存」との連携
- **テストの目的**: 複数機能の連携動作確認
  - **確認ポイント**: 機能間の連携が正常に動作すること
- 🔵 青信号: REQ-001, REQ-002, REQ-401, REQ-601の連携テスト

```dart
// 【テスト目的】: 文字入力→読み上げ→履歴保存の一連フローが正常動作するか確認
// 【テスト内容】: 「こんにちは」入力→読み上げ→履歴画面で確認
// 【期待される動作】: 履歴に「こんにちは」が保存される
testWidgets('TC-E2E-082-016: 文字入力→読み上げ→履歴保存の一連フローが正常動作', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【実際の処理実行】: 「こんにちは」を入力
  await typeOnCharacterBoard(tester, 'こんにちは');

  // 【実際の処理実行】: 読み上げボタンをタップ
  await tapButton(tester, '読み上げ');

  // 【結果検証】: TTS読み上げが開始される
  expect(find.text('停止'), findsOneWidget);

  // 【実際の処理実行】: 停止して履歴画面に遷移
  await tapButton(tester, '停止');
  await navigateTo(tester, '履歴');

  // 【結果検証】: 履歴に「こんにちは」が保存されていること
  expect(find.text('こんにちは'), findsOneWidget);
});
```

---

### TC-E2E-082-017: 複数回の入力→読み上げサイクルが安定動作

- **テスト名**: 複数サイクル安定性テスト
  - **何をテストするか**: 入力→読み上げサイクルの繰り返しでの安定性
  - **期待される動作**: 複数回のサイクルを安定して実行できる
- **入力値**: 3回の入力→読み上げ→全消去サイクル
  - **入力データの意味**: 実際の使用パターンでの安定性確認
- **期待される結果**: すべてのサイクルが正常に完了する
  - **期待結果の理由**: NFR-301の「重大エラーでも基本機能を継続利用可能」
- **テストの目的**: 繰り返し使用時の安定性確認
  - **確認ポイント**: メモリリーク、状態管理の問題がないこと
- 🟡 黄信号: NFR-301から安定性として妥当な推測

```dart
// 【テスト目的】: 複数回の入力→読み上げサイクルが安定動作するか確認
// 【テスト内容】: 3回の入力→読み上げ→全消去サイクルを実行
// 【期待される動作】: すべてのサイクルが正常に完了する
testWidgets('TC-E2E-082-017: 複数回の入力→読み上げサイクルが安定動作', (tester) async {
  // 【テストデータ準備】: アプリを初期化
  await pumpApp(tester);

  // 【実際の処理実行】: 3回のサイクルを実行
  for (int i = 0; i < 3; i++) {
    // サイクル i+1: 入力
    await typeOnCharacterBoard(tester, 'テスト${i + 1}');

    // サイクル i+1: 読み上げ
    await tapButton(tester, '読み上げ');
    await waitForWidget(tester, find.text('停止'));
    await tapButton(tester, '停止');

    // サイクル i+1: 全消去
    await tapButton(tester, '全消去');
    await tapButton(tester, 'はい');
  }

  // 【結果検証】: アプリが安定動作していること
  await tester.pumpAndSettle();
  expect(find.text('kotonoha'), findsOneWidget);
});
```

---

## 品質判定

### 判定結果: ✅ 高品質

- **テストケース分類**: 正常系・異常系・境界値・パフォーマンス・統合が網羅されている ✅
- **期待値定義**: 各テストケースの期待値が明確に定義されている ✅
- **技術選択**: Dart + integration_test で確定 ✅
- **実装可能性**: TASK-0081で構築済みのE2Eテスト環境で実現可能 ✅

### テストケース信頼性レベル内訳

- 🔵 **青信号**: 10件（REQ-002, REQ-003, REQ-004, REQ-401, REQ-403, REQ-5002, NFR-001, NFR-003, REQ-601連携）
- 🟡 **黄信号**: 7件（連続入力、1文字入力、1000文字、1001文字制限、削除連打、連続タップ安定性、複数サイクル安定性）
- 🔴 **赤信号**: 0件

---

## 次のステップ

次のお勧めステップ: `/tsumiki:tdd-red` でRedフェーズ（失敗テスト作成）を開始します。

---

## 関連ドキュメント

- **要件定義書**: `docs/implements/kotonoha/TASK-0082/requirements.md`
- **E2Eテストヘルパー**: `frontend/kotonoha_app/integration_test/helpers/test_helpers.dart`
- **E2Eテスト環境構築**: TASK-0081

---

## 更新履歴

- **2025-11-29**: テストケース一覧作成
  - 正常系テストケース: 6件
  - 異常系テストケース: 2件
  - 境界値テストケース: 4件
  - パフォーマンステストケース: 3件
  - 統合テストケース: 2件
  - 品質判定: ✅ 高品質
