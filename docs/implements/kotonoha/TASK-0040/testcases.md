# TDDテストケース定義書 - TASK-0040: 定型文一覧UI実装

## テスト概要

| 項目 | 内容 |
|------|------|
| **タスクID** | TASK-0040 |
| **タスク名** | 定型文一覧UI実装 |
| **テスト対象** | PhraseListWidget, PhraseListItem, PhraseCategorySection, PhraseEmptyState |
| **テストフレームワーク** | flutter_test |
| **モックライブラリ** | mocktail |
| **テストケース総数** | 35件 |

---

## 開発言語・フレームワーク 🔵

- **プログラミング言語**: Dart 3.x
  - **言語選択の理由**: Flutterアプリケーションの標準言語
  - **テストに適した機能**: 非同期テスト、ウィジェットテスト対応
- **テストフレームワーク**: flutter_test + mocktail
  - **フレームワーク選択の理由**: Flutterウィジェットテストの標準ツール
  - **テスト実行環境**: `flutter test` コマンド

---

## テスト対象ファイル

| ファイル | 説明 |
|----------|------|
| `lib/features/preset_phrase/presentation/widgets/phrase_list_widget.dart` | メインリストウィジェット |
| `lib/features/preset_phrase/presentation/widgets/phrase_list_item.dart` | 各定型文アイテム |
| `lib/features/preset_phrase/presentation/widgets/phrase_category_section.dart` | カテゴリセクションヘッダー |
| `lib/features/preset_phrase/presentation/widgets/phrase_empty_state.dart` | 空状態表示 |

---

## 1. PhraseListWidget テストケース

### 1.1 正常系テスト

#### TC-040-001: 定型文一覧が正しく表示される 🔵

- **テスト名**: 定型文一覧が正しく表示される
  - **何をテストするか**: PhraseListWidgetが定型文リストを正しく表示すること
  - **期待される動作**: 渡された定型文データがリスト形式で表示される
- **入力値**: 3件の定型文（日常カテゴリ2件、体調カテゴリ1件）
  - **入力データの意味**: 複数カテゴリの定型文表示を確認
- **期待される結果**: 3件の定型文がすべて表示される
  - **期待結果の理由**: REQ-101（定型文を一覧表示）
- **テストの目的**: 基本的な一覧表示機能の確認
  - **確認ポイント**: 各定型文のcontentが画面上に存在すること
- **関連要件**: REQ-101
- **優先度**: P0 必須

#### TC-040-002: お気に入り定型文がリスト上部に表示される 🔵

- **テスト名**: お気に入り定型文がリスト上部に優先表示される
  - **何をテストするか**: お気に入りフラグ付きの定型文が通常の定型文より上に表示されること
  - **期待される動作**: お気に入りセクションがカテゴリセクションより先に表示される
- **入力値**: お気に入り2件 + 通常3件の定型文
  - **入力データの意味**: お気に入りと通常の混在表示を確認
- **期待される結果**: お気に入り定型文が先に表示される
  - **期待結果の理由**: REQ-105（お気に入り優先表示）
- **テストの目的**: お気に入り優先表示の確認
  - **確認ポイント**: お気に入りセクションヘッダーの位置
- **関連要件**: REQ-105
- **優先度**: P0 必須

#### TC-040-003: カテゴリ別に定型文が分類表示される 🔵

- **テスト名**: 定型文がカテゴリ別に分類表示される
  - **何をテストするか**: 「日常」「体調」「その他」のカテゴリごとにグループ化表示
  - **期待される動作**: 各カテゴリのセクションヘッダーと定型文が表示される
- **入力値**: 各カテゴリに1件ずつ、計3件の定型文
  - **入力データの意味**: 3カテゴリすべての表示を確認
- **期待される結果**: 「日常」「体調」「その他」のセクションが表示される
  - **期待結果の理由**: REQ-106（カテゴリ分類）
- **テストの目的**: カテゴリ分類機能の確認
  - **確認ポイント**: カテゴリヘッダーの表示と順序
- **関連要件**: REQ-106
- **優先度**: P0 必須

#### TC-040-004: 定型文タップでコールバックが発火する 🔵

- **テスト名**: 定型文タップでonPhraseSelectedコールバックが発火する
  - **何をテストするか**: 定型文アイテムのタップイベントハンドリング
  - **期待される動作**: タップ時にonPhraseSelectedが呼び出される
- **入力値**: 1件の定型文、モックコールバック
  - **入力データの意味**: タップインタラクションのテスト
- **期待される結果**: コールバックが1回呼び出され、正しい定型文が渡される
  - **期待結果の理由**: UC-002（定型文選択）
- **テストの目的**: タップインタラクションの確認
  - **確認ポイント**: コールバック呼び出しと引数
- **関連要件**: AC-004
- **優先度**: P0 必須

#### TC-040-005: スクロール可能なリスト表示 🟡

- **テスト名**: 定型文リストがスクロール可能であること
  - **何をテストするか**: ListView.builderによるスクロール可能なリスト実装
  - **期待される動作**: 定型文が多数ある場合にスクロール可能
- **入力値**: 20件の定型文
  - **入力データの意味**: スクロールが必要な件数
- **期待される結果**: スクロール操作が可能であること
  - **期待結果の理由**: 大量データ対応
- **テストの目的**: スクロール機能の確認
  - **確認ポイント**: スクロール後に下部の定型文が表示される
- **関連要件**: NFR-004
- **優先度**: P1 重要

### 1.2 空状態・エッジケーステスト

#### TC-040-006: 定型文0件で空状態メッセージ表示 🔵

- **テスト名**: 定型文が0件の場合「定型文がありません」と表示される
  - **何をテストするか**: 空リスト時の表示
  - **期待される動作**: PhraseEmptyStateウィジェットが表示される
- **入力値**: 空リスト（[]）
  - **入力データの意味**: 定型文未登録状態
- **期待される結果**: 「定型文がありません」メッセージが表示される
  - **期待結果の理由**: EDGE-104類似、ユーザビリティ
- **テストの目的**: 空状態の適切な表示確認
  - **確認ポイント**: 空状態メッセージの存在
- **関連要件**: AC-005, EDGE-104
- **優先度**: P0 必須

#### TC-040-007: 空カテゴリは非表示になる 🔵

- **テスト名**: 定型文がないカテゴリは非表示になる
  - **何をテストするか**: 空カテゴリのセクション非表示
  - **期待される動作**: 定型文が0件のカテゴリセクションは表示されない
- **入力値**: 日常カテゴリのみ2件（体調・その他は0件）
  - **入力データの意味**: 部分的に空のカテゴリ状態
- **期待される結果**: 「日常」のみ表示、「体調」「その他」は非表示
  - **期待結果の理由**: EDGE-204（空カテゴリ非表示）
- **テストの目的**: 空カテゴリの非表示確認
  - **確認ポイント**: カテゴリヘッダーが表示されないこと
- **関連要件**: AC-006, EDGE-204
- **優先度**: P1 重要

#### TC-040-008: お気に入りのみ存在する場合の表示 🟡

- **テスト名**: お気に入りのみ存在する場合の正常表示
  - **何をテストするか**: お気に入りセクションのみの表示
  - **期待される動作**: お気に入りセクションのみが表示される
- **入力値**: お気に入り3件（通常カテゴリは0件）
  - **入力データの意味**: お気に入りのみの状態
- **期待される結果**: お気に入りセクションのみ表示される
  - **期待結果の理由**: エッジケース対応
- **テストの目的**: お気に入りのみ表示の確認
  - **確認ポイント**: カテゴリセクションが表示されないこと
- **関連要件**: REQ-105
- **優先度**: P2 低

### 1.3 サイズ・アクセシビリティテスト

#### TC-040-009: リストアイテムのタップターゲットが44px以上 🔵

- **テスト名**: リストアイテムのタップターゲットサイズが44px以上
  - **何をテストするか**: アクセシビリティ要件のタップターゲットサイズ
  - **期待される動作**: 各アイテムの高さが44px以上
- **入力値**: 1件の定型文
  - **入力データの意味**: サイズ測定用
- **期待される結果**: アイテムの高さが44px以上
  - **期待結果の理由**: REQ-5001（タップターゲット44px以上）
- **テストの目的**: アクセシビリティ要件の確認
  - **確認ポイント**: ウィジェットのサイズ
- **関連要件**: REQ-5001, AC-008
- **優先度**: P0 必須

#### TC-040-010: Semanticsラベルが設定されている 🟡

- **テスト名**: 定型文アイテムにSemanticsラベルが設定されている
  - **何をテストするか**: スクリーンリーダー対応
  - **期待される動作**: 各アイテムにSemanticsラベルが付与される
- **入力値**: 1件の定型文（content: "おはようございます"）
  - **入力データの意味**: ラベル確認用
- **期待される結果**: Semanticsラベルに定型文の内容が含まれる
  - **期待結果の理由**: アクセシビリティ対応
- **テストの目的**: スクリーンリーダー対応確認
  - **確認ポイント**: Semanticsウィジェットの存在とラベル
- **関連要件**: アクセシビリティ
- **優先度**: P1 重要

---

## 2. PhraseListItem テストケース

### 2.1 正常系テスト

#### TC-040-011: 定型文アイテムが正しく表示される 🔵

- **テスト名**: PhraseListItemが定型文内容を正しく表示する
  - **何をテストするか**: 個別アイテムの表示
  - **期待される動作**: contentが表示される
- **入力値**: PresetPhrase（content: "こんにちは"）
  - **入力データの意味**: 基本的な定型文
- **期待される結果**: 「こんにちは」が表示される
  - **期待結果の理由**: 基本表示機能
- **テストの目的**: アイテム表示の確認
  - **確認ポイント**: テキスト表示
- **関連要件**: REQ-101
- **優先度**: P0 必須

#### TC-040-012: お気に入りアイコンが表示される 🟡

- **テスト名**: お気に入り定型文にお気に入りアイコンが表示される
  - **何をテストするか**: お気に入りフラグの視覚的表示
  - **期待される動作**: isFavorite=trueの場合、お気に入りアイコンが表示される
- **入力値**: PresetPhrase（isFavorite: true）
  - **入力データの意味**: お気に入り登録済み
- **期待される結果**: お気に入りアイコン（星など）が表示される
  - **期待結果の理由**: お気に入り状態の視覚化
- **テストの目的**: お気に入り表示の確認
  - **確認ポイント**: アイコンの存在
- **関連要件**: REQ-105
- **優先度**: P1 重要

#### TC-040-013: タップ時にコールバックが発火する 🔵

- **テスト名**: PhraseListItemタップでonTapコールバックが発火する
  - **何をテストするか**: タップイベントの伝播
  - **期待される動作**: タップでonTapが呼び出される
- **入力値**: PresetPhrase、モックコールバック
  - **入力データの意味**: インタラクションテスト
- **期待される結果**: コールバックが呼び出される
  - **期待結果の理由**: ユーザー操作対応
- **テストの目的**: タップハンドリング確認
  - **確認ポイント**: コールバック呼び出し
- **関連要件**: AC-004
- **優先度**: P0 必須

#### TC-040-014: 長いテキストが省略表示される 🟡

- **テスト名**: 長い定型文テキストが省略表示される
  - **何をテストするか**: テキストオーバーフロー処理
  - **期待される動作**: 長いテキストが...で省略される
- **入力値**: PresetPhrase（content: 100文字の長いテキスト）
  - **入力データの意味**: オーバーフローケース
- **期待される結果**: テキストが省略表示される（overflow: ellipsis）
  - **期待結果の理由**: UIの整合性
- **テストの目的**: テキストオーバーフロー処理確認
  - **確認ポイント**: Textウィジェットのoverflow設定
- **関連要件**: UI品質
- **優先度**: P2 低

### 2.2 サイズ・アクセシビリティテスト

#### TC-040-015: アイテムの最小高さが44px以上 🔵

- **テスト名**: PhraseListItemの最小高さが44px以上
  - **何をテストするか**: アクセシビリティ要件
  - **期待される動作**: アイテム高さが44px以上
- **入力値**: PresetPhrase（短いテキスト）
  - **入力データの意味**: 最小サイズ確認
- **期待される結果**: 高さが44px以上
  - **期待結果の理由**: REQ-5001
- **テストの目的**: サイズ要件確認
  - **確認ポイント**: ウィジェットの高さ
- **関連要件**: REQ-5001, AC-008
- **優先度**: P0 必須

#### TC-040-016: アイテムの推奨高さ60px 🟡

- **テスト名**: PhraseListItemの推奨高さが60px
  - **何をテストするか**: 推奨サイズ
  - **期待される動作**: アイテム高さが60px程度
- **入力値**: PresetPhrase
  - **入力データの意味**: 推奨サイズ確認
- **期待される結果**: 高さが60px程度
  - **期待結果の理由**: NFR-202（推奨60px）
- **テストの目的**: 推奨サイズ確認
  - **確認ポイント**: ウィジェットの高さ
- **関連要件**: NFR-202
- **優先度**: P2 低

---

## 3. PhraseCategorySection テストケース

### 3.1 正常系テスト

#### TC-040-017: カテゴリセクションヘッダーが表示される 🔵

- **テスト名**: PhraseCategorySectionがカテゴリ名を表示する
  - **何をテストするか**: カテゴリヘッダー表示
  - **期待される動作**: カテゴリ名（「日常」等）が表示される
- **入力値**: category: "daily"、定型文リスト
  - **入力データの意味**: 日常カテゴリ
- **期待される結果**: 「日常」がヘッダーに表示される
  - **期待結果の理由**: REQ-106（カテゴリ分類）
- **テストの目的**: ヘッダー表示確認
  - **確認ポイント**: カテゴリ名の表示
- **関連要件**: REQ-106
- **優先度**: P0 必須

#### TC-040-018: 日常カテゴリの表示名が正しい 🔵

- **テスト名**: 日常カテゴリの表示名が「日常」である
  - **何をテストするか**: カテゴリ表示名
  - **期待される動作**: "daily" → "日常"
- **入力値**: category: "daily"
  - **入力データの意味**: 日常カテゴリ識別子
- **期待される結果**: 「日常」と表示される
  - **期待結果の理由**: 日本語UI
- **テストの目的**: 表示名マッピング確認
  - **確認ポイント**: 表示テキスト
- **関連要件**: REQ-106
- **優先度**: P0 必須

#### TC-040-019: 体調カテゴリの表示名が正しい 🔵

- **テスト名**: 体調カテゴリの表示名が「体調」である
  - **何をテストするか**: カテゴリ表示名
  - **期待される動作**: "health" → "体調"
- **入力値**: category: "health"
  - **入力データの意味**: 体調カテゴリ識別子
- **期待される結果**: 「体調」と表示される
  - **期待結果の理由**: 日本語UI
- **テストの目的**: 表示名マッピング確認
  - **確認ポイント**: 表示テキスト
- **関連要件**: REQ-106
- **優先度**: P0 必須

#### TC-040-020: その他カテゴリの表示名が正しい 🔵

- **テスト名**: その他カテゴリの表示名が「その他」である
  - **何をテストするか**: カテゴリ表示名
  - **期待される動作**: "other" → "その他"
- **入力値**: category: "other"
  - **入力データの意味**: その他カテゴリ識別子
- **期待される結果**: 「その他」と表示される
  - **期待結果の理由**: 日本語UI
- **テストの目的**: 表示名マッピング確認
  - **確認ポイント**: 表示テキスト
- **関連要件**: REQ-106
- **優先度**: P0 必須

#### TC-040-021: セクション内の定型文が表示される 🔵

- **テスト名**: カテゴリセクション内に定型文が表示される
  - **何をテストするか**: セクション内アイテム表示
  - **期待される動作**: セクションヘッダーの下に定型文が表示される
- **入力値**: カテゴリと3件の定型文
  - **入力データの意味**: セクション構成
- **期待される結果**: 3件の定型文が表示される
  - **期待結果の理由**: 基本表示機能
- **テストの目的**: セクション構成確認
  - **確認ポイント**: アイテムの存在と数
- **関連要件**: REQ-101, REQ-106
- **優先度**: P0 必須

---

## 4. PhraseEmptyState テストケース

### 4.1 正常系テスト

#### TC-040-022: 空状態メッセージが表示される 🔵

- **テスト名**: PhraseEmptyStateが空状態メッセージを表示する
  - **何をテストするか**: 空状態のUI表示
  - **期待される動作**: 「定型文がありません」メッセージが表示される
- **入力値**: なし
  - **入力データの意味**: 空状態
- **期待される結果**: 空状態メッセージが表示される
  - **期待結果の理由**: EDGE-104類似
- **テストの目的**: 空状態UI確認
  - **確認ポイント**: メッセージテキスト
- **関連要件**: AC-005, EDGE-104
- **優先度**: P0 必須

#### TC-040-023: 空状態アイコンが表示される 🟡

- **テスト名**: PhraseEmptyStateにアイコンが表示される
  - **何をテストするか**: 空状態の視覚的表示
  - **期待される動作**: アイコン（インフォメーションなど）が表示される
- **入力値**: なし
  - **入力データの意味**: 空状態
- **期待される結果**: アイコンが表示される
  - **期待結果の理由**: UX向上
- **テストの目的**: 視覚的要素確認
  - **確認ポイント**: アイコンの存在
- **関連要件**: UX
- **優先度**: P2 低

---

## 5. テーマ対応テスト

### 5.1 ライトテーマ

#### TC-040-024: ライトテーマで正しく表示される 🔵

- **テスト名**: ライトテーマで定型文一覧が正しく表示される
  - **何をテストするか**: ライトテーマでの表示
  - **期待される動作**: ライトテーマの配色で表示される
- **入力値**: ライトテーマ設定、定型文リスト
  - **入力データの意味**: テーマ適用確認
- **期待される結果**: ライトテーマの配色が適用される
  - **期待結果の理由**: REQ-803（テーマ対応）
- **テストの目的**: テーマ適用確認
  - **確認ポイント**: ウィジェットの描画
- **関連要件**: REQ-803, AC-009
- **優先度**: P1 重要

### 5.2 ダークテーマ

#### TC-040-025: ダークテーマで正しく表示される 🔵

- **テスト名**: ダークテーマで定型文一覧が正しく表示される
  - **何をテストするか**: ダークテーマでの表示
  - **期待される動作**: ダークテーマの配色で表示される
- **入力値**: ダークテーマ設定、定型文リスト
  - **入力データの意味**: テーマ適用確認
- **期待される結果**: ダークテーマの配色が適用される
  - **期待結果の理由**: REQ-803（テーマ対応）
- **テストの目的**: テーマ適用確認
  - **確認ポイント**: ウィジェットの描画
- **関連要件**: REQ-803, AC-009
- **優先度**: P1 重要

### 5.3 高コントラストテーマ

#### TC-040-026: 高コントラストテーマで正しく表示される 🔵

- **テスト名**: 高コントラストテーマで定型文一覧が正しく表示される
  - **何をテストするか**: 高コントラストテーマでの表示
  - **期待される動作**: 高コントラストの配色で表示される
- **入力値**: 高コントラストテーマ設定、定型文リスト
  - **入力データの意味**: テーマ適用確認
- **期待される結果**: 高コントラストの配色が適用される
  - **期待結果の理由**: REQ-803（テーマ対応）
- **テストの目的**: テーマ適用確認
  - **確認ポイント**: ウィジェットの描画
- **関連要件**: REQ-803, AC-009
- **優先度**: P1 重要

---

## 6. パフォーマンステスト

#### TC-040-027: 100件の定型文が1秒以内に表示される 🟡

- **テスト名**: 100件の定型文を1秒以内に表示できる
  - **何をテストするか**: 大量データの表示パフォーマンス
  - **期待される動作**: 100件の定型文が1秒以内に初期表示される
- **入力値**: 100件の定型文リスト
  - **入力データの意味**: NFR-004の境界値
- **期待される結果**: 表示完了までの時間が1秒以内
  - **期待結果の理由**: NFR-004（1秒以内に100件表示）
- **テストの目的**: パフォーマンス要件確認
  - **確認ポイント**: 表示完了時間
- **関連要件**: NFR-004, AC-007
- **優先度**: P1 重要

#### TC-040-028: ListView.builderが使用されている 🟡

- **テスト名**: リスト表示にListView.builderが使用されている
  - **何をテストするか**: 仮想化スクロールの実装
  - **期待される動作**: ListView.builderによる効率的な描画
- **入力値**: 50件の定型文リスト
  - **入力データの意味**: 仮想化が必要な件数
- **期待される結果**: ListView.builderまたは同等の仮想化リストが使用される
  - **期待結果の理由**: 大量データ対応
- **テストの目的**: 実装方式確認
  - **確認ポイント**: ListView.builderの使用
- **関連要件**: NFR-004
- **優先度**: P2 低

---

## 7. 統合テスト

#### TC-040-029: お気に入りセクションとカテゴリセクションの両方が表示される 🔵

- **テスト名**: お気に入りとカテゴリの両方が正しい順序で表示される
  - **何をテストするか**: 複合表示の統合
  - **期待される動作**: お気に入り→日常→体調→その他の順で表示
- **入力値**: お気に入り2件 + 各カテゴリ1件ずつ
  - **入力データの意味**: 全セクション表示
- **期待される結果**: 正しい順序で全セクションが表示される
  - **期待結果の理由**: REQ-105, REQ-106の統合
- **テストの目的**: 統合動作確認
  - **確認ポイント**: セクション順序
- **関連要件**: REQ-105, REQ-106
- **優先度**: P0 必須

#### TC-040-030: 定型文選択から入力欄反映までの統合フロー 🟡

- **テスト名**: 定型文タップから選択コールバックまでの統合フロー
  - **何をテストするか**: ユーザーフロー全体
  - **期待される動作**: タップ→コールバック発火→正しいデータ渡し
- **入力値**: 複数の定型文、モックコールバック
  - **入力データの意味**: 統合テスト
- **期待される結果**: 選択した定型文がコールバックに正しく渡される
  - **期待結果の理由**: UC-002
- **テストの目的**: E2E動作確認
  - **確認ポイント**: データの一貫性
- **関連要件**: AC-004
- **優先度**: P1 重要

---

## 8. 境界値テスト

#### TC-040-031: 定型文1件のみの表示 🟡

- **テスト名**: 定型文が1件のみの場合の表示
  - **境界値の意味**: 最小有効データ
  - **境界値での動作保証**: 1件でも正しく表示される
- **入力値**: 1件の定型文
  - **境界値選択の根拠**: 最小有効件数
- **期待される結果**: 1件の定型文が正しく表示される
  - **境界での正確性**: リスト表示が正常動作
- **テストの目的**: 最小データの確認
  - **堅牢性の確認**: 極小データでも動作
- **関連要件**: REQ-101
- **優先度**: P1 重要

#### TC-040-032: 500件の定型文表示（上限値） 🟡

- **テスト名**: 定型文が500件（上限値）の場合の表示
  - **境界値の意味**: 設計上限値
  - **境界値での動作保証**: 上限でも正しく表示される
- **入力値**: 500件の定型文
  - **境界値選択の根拠**: 要件定義の上限
- **期待される結果**: 500件の定型文が表示可能
  - **境界での正確性**: メモリエラーなし
- **テストの目的**: 上限値の確認
  - **堅牢性の確認**: 大量データでも動作
- **関連要件**: 入力仕様
- **優先度**: P2 低

#### TC-040-033: 定型文テキストが1文字の場合 🟡

- **テスト名**: 定型文テキストが最短（1文字）の場合
  - **境界値の意味**: 最短テキスト
  - **境界値での動作保証**: 1文字でも正しく表示
- **入力値**: PresetPhrase（content: "あ"）
  - **境界値選択の根拠**: 最短有効テキスト
- **期待される結果**: 「あ」が正しく表示される
  - **境界での正確性**: 表示が崩れない
- **テストの目的**: 最短テキストの確認
  - **堅牢性の確認**: 極端に短いデータでも動作
- **関連要件**: UI品質
- **優先度**: P2 低

#### TC-040-034: 定型文テキストが500文字（上限値）の場合 🟡

- **テスト名**: 定型文テキストが500文字（上限値）の場合
  - **境界値の意味**: テキスト上限値
  - **境界値での動作保証**: 上限テキストでも正しく省略表示
- **入力値**: PresetPhrase（content: 500文字のテキスト）
  - **境界値選択の根拠**: EDGE-102の境界
- **期待される結果**: テキストが省略表示される
  - **境界での正確性**: オーバーフロー処理が動作
- **テストの目的**: 上限テキストの確認
  - **堅牢性の確認**: 長いテキストでも動作
- **関連要件**: EDGE-102
- **優先度**: P2 低

---

## 9. お気に入り切り替えテスト

#### TC-040-035: お気に入り切り替えコールバックが発火する 🟡

- **テスト名**: お気に入りアイコンタップでonFavoriteToggleが発火する
  - **何をテストするか**: お気に入り切り替え機能
  - **期待される動作**: お気に入りアイコンタップでコールバック発火
- **入力値**: PresetPhrase、モックコールバック
  - **入力データの意味**: お気に入り操作
- **期待される結果**: onFavoriteToggleが呼び出される
  - **期待結果の理由**: お気に入り管理機能
- **テストの目的**: お気に入り切り替え確認
  - **確認ポイント**: コールバック呼び出しと引数
- **関連要件**: REQ-105
- **優先度**: P1 重要

---

## テストケースサマリー

| カテゴリ | テスト数 | P0 | P1 | P2 |
|----------|----------|-----|-----|-----|
| PhraseListWidget - 正常系 | 5 | 4 | 1 | 0 |
| PhraseListWidget - エッジケース | 3 | 1 | 1 | 1 |
| PhraseListWidget - アクセシビリティ | 2 | 1 | 1 | 0 |
| PhraseListItem - 正常系 | 4 | 2 | 1 | 1 |
| PhraseListItem - アクセシビリティ | 2 | 1 | 0 | 1 |
| PhraseCategorySection | 5 | 5 | 0 | 0 |
| PhraseEmptyState | 2 | 1 | 0 | 1 |
| テーマ対応 | 3 | 0 | 3 | 0 |
| パフォーマンス | 2 | 0 | 1 | 1 |
| 統合テスト | 2 | 1 | 1 | 0 |
| 境界値テスト | 4 | 0 | 1 | 3 |
| お気に入り切り替え | 1 | 0 | 1 | 0 |
| **合計** | **35** | **16** | **11** | **8** |

---

## 品質判定

### 判定結果: ✅ 高品質

| 項目 | 状態 |
|------|------|
| テストケース分類 | 正常系・異常系・境界値が網羅されている |
| 期待値定義 | 各テストケースの期待値が明確 |
| 技術選択 | Dart + flutter_test + mocktail |
| 実装可能性 | 現在の技術スタックで実現可能 |

---

## 次のステップ

次のお勧めステップ: `/tsumiki:tdd-red` でRedフェーズ（失敗テスト作成）を開始します。
