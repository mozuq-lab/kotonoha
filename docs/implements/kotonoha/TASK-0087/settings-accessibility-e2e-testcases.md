# TASK-0087: 設定・アクセシビリティE2Eテスト - テストケース一覧

## タスク情報

- **タスクID**: TASK-0087
- **タスクタイプ**: TDD (E2Eテスト)
- **作成日**: 2025-11-30
- **関連要件**: REQ-801, REQ-802, REQ-803, REQ-2007, REQ-2008, REQ-5006, REQ-404, REQ-903

## 開発言語・フレームワーク

- **プログラミング言語**: Dart (Flutter)
  - **言語選択の理由**: フロントエンドがFlutterで実装されているため
  - **テストに適した機能**: flutter_testパッケージ、WidgetTester
- **テストフレームワーク**: Flutter integration_test
  - **フレームワーク選択の理由**: Flutter公式E2Eテストフレームワーク、既存テストとの一貫性
  - **テスト実行環境**: Chrome（Web）、iOS Simulator、Android Emulator
- 🔵 信頼性レベル: 青信号 - tech-stack.mdに基づく

---

## テストケース一覧

### 1. フォントサイズ設定テスト

#### TC-E2E-087-001: 設定画面が表示される

- **テスト名**: 設定画面表示確認
  - **何をテストするか**: 設定画面に正常にアクセスできること
  - **期待される動作**: 設定画面が表示され、各設定セクションが確認できる
- **入力値**: 設定アイコン/ボタンタップ
  - **入力データの意味**: ナビゲーション操作
- **期待される結果**: 設定画面が表示される
  - **期待結果の理由**: 設定機能へのアクセスが必須
- **テストの目的**: UI要素の存在確認
  - **確認ポイント**: 画面遷移、セクション表示
- 🔵 信頼性レベル: 青信号 - 基本機能要件

---

#### TC-E2E-087-002: フォントサイズ「小」への変更と即時反映

- **テスト名**: フォントサイズ小変更
  - **何をテストするか**: フォントサイズを「小」に変更すると即座に反映されること
  - **期待される動作**: テキストサイズが小さくなる
- **入力値**: フォントサイズ設定で「小」を選択
  - **入力データの意味**: 最小フォントサイズへの変更
- **期待される結果**:
  - 設定画面内のテキストサイズが即座に小さくなる
  - 文字盤画面のテキストも小さくなる
  - **期待結果の理由**: REQ-2007で即時反映が要求されている
- **テストの目的**: フォントサイズ変更機能の確認
  - **確認ポイント**: 即時反映、複数画面への適用
- 🔵 信頼性レベル: 青信号 - REQ-801, REQ-2007に基づく

---

#### TC-E2E-087-003: フォントサイズ「中」への変更と即時反映

- **テスト名**: フォントサイズ中変更
  - **何をテストするか**: フォントサイズを「中」に変更すると即座に反映されること
  - **期待される動作**: テキストサイズが中（デフォルト）になる
- **入力値**: フォントサイズ設定で「中」を選択
  - **入力データの意味**: 標準フォントサイズへの変更
- **期待される結果**:
  - テキストサイズが標準サイズになる
  - **期待結果の理由**: REQ-801で3段階選択が要求されている
- **テストの目的**: フォントサイズ変更機能の確認
  - **確認ポイント**: デフォルトサイズへの戻し
- 🔵 信頼性レベル: 青信号 - REQ-801に基づく

---

#### TC-E2E-087-004: フォントサイズ「大」への変更と即時反映

- **テスト名**: フォントサイズ大変更
  - **何をテストするか**: フォントサイズを「大」に変更すると即座に反映されること
  - **期待される動作**: テキストサイズが大きくなる
- **入力値**: フォントサイズ設定で「大」を選択
  - **入力データの意味**: 最大フォントサイズへの変更
- **期待される結果**:
  - 設定画面内のテキストサイズが即座に大きくなる
  - 文字盤画面のテキストも大きくなる
  - **期待結果の理由**: REQ-2007で即時反映が要求されている
- **テストの目的**: フォントサイズ変更機能の確認
  - **確認ポイント**: 最大サイズでの表示、レイアウト崩れがないこと
- 🔵 信頼性レベル: 青信号 - REQ-801, REQ-2007に基づく

---

#### TC-E2E-087-005: フォントサイズ変更が文字盤に追従

- **テスト名**: 文字盤フォントサイズ追従
  - **何をテストするか**: 文字盤のフォントサイズがフォントサイズ設定に追従すること
  - **期待される動作**: 文字盤のひらがな・カタカナ等が設定サイズになる
- **入力値**: フォントサイズを「大」に変更後、文字盤画面を確認
  - **入力データの意味**: 文字盤でのフォントサイズ確認
- **期待される結果**:
  - 文字盤の文字が大きくなっている
  - **期待結果の理由**: REQ-802で文字盤のフォントサイズ追従が要求されている
- **テストの目的**: 文字盤へのフォントサイズ適用確認
  - **確認ポイント**: 文字盤ウィジェットのテキストサイズ
- 🔵 信頼性レベル: 青信号 - REQ-802に基づく

---

#### TC-E2E-087-006: フォントサイズ変更が定型文一覧に追従

- **テスト名**: 定型文一覧フォントサイズ追従
  - **何をテストするか**: 定型文一覧のフォントサイズがフォントサイズ設定に追従すること
  - **期待される動作**: 定型文リストのテキストが設定サイズになる
- **入力値**: フォントサイズを「大」に変更後、定型文一覧を確認
  - **入力データの意味**: 定型文一覧でのフォントサイズ確認
- **期待される結果**:
  - 定型文一覧のテキストが大きくなっている
  - **期待結果の理由**: REQ-802で定型文一覧のフォントサイズ追従が要求されている
- **テストの目的**: 定型文一覧へのフォントサイズ適用確認
  - **確認ポイント**: 定型文リストアイテムのテキストサイズ
- 🔵 信頼性レベル: 青信号 - REQ-802に基づく

---

#### TC-E2E-087-007: フォントサイズ変更がボタンラベルに追従

- **テスト名**: ボタンラベルフォントサイズ追従
  - **何をテストするか**: ボタンラベルのフォントサイズがフォントサイズ設定に追従すること
  - **期待される動作**: 各種ボタンのラベルが設定サイズになる
- **入力値**: フォントサイズを「大」に変更後、ボタンを確認
  - **入力データの意味**: ボタンラベルでのフォントサイズ確認
- **期待される結果**:
  - 読み上げボタン、大ボタン等のラベルが大きくなっている
  - **期待結果の理由**: REQ-802でボタンラベルのフォントサイズ追従が要求されている
- **テストの目的**: ボタンへのフォントサイズ適用確認
  - **確認ポイント**: 各種ボタンのラベルテキストサイズ
- 🔵 信頼性レベル: 青信号 - REQ-802に基づく

---

### 2. テーマ設定テスト

#### TC-E2E-087-008: テーマ「ライトモード」への変更と即時反映

- **テスト名**: ライトモード変更
  - **何をテストするか**: テーマを「ライトモード」に変更すると即座に反映されること
  - **期待される動作**: 背景が明るく、テキストが暗くなる
- **入力値**: テーマ設定で「ライトモード」を選択
  - **入力データの意味**: 明るいテーマへの変更
- **期待される結果**:
  - 背景色が白/明るい色になる
  - テキスト色が黒/暗い色になる
  - **期待結果の理由**: REQ-2008で即時反映が要求されている
- **テストの目的**: テーマ変更機能の確認
  - **確認ポイント**: 即時反映、配色変更
- 🔵 信頼性レベル: 青信号 - REQ-803, REQ-2008に基づく

---

#### TC-E2E-087-009: テーマ「ダークモード」への変更と即時反映

- **テスト名**: ダークモード変更
  - **何をテストするか**: テーマを「ダークモード」に変更すると即座に反映されること
  - **期待される動作**: 背景が暗く、テキストが明るくなる
- **入力値**: テーマ設定で「ダークモード」を選択
  - **入力データの意味**: 暗いテーマへの変更
- **期待される結果**:
  - 背景色が黒/暗い色になる
  - テキスト色が白/明るい色になる
  - **期待結果の理由**: REQ-2008で即時反映が要求されている
- **テストの目的**: テーマ変更機能の確認
  - **確認ポイント**: ダークモード配色の適用
- 🔵 信頼性レベル: 青信号 - REQ-803, REQ-2008に基づく

---

#### TC-E2E-087-010: テーマ「高コントラストモード」への変更と即時反映

- **テスト名**: 高コントラストモード変更
  - **何をテストするか**: テーマを「高コントラストモード」に変更すると即座に反映されること
  - **期待される動作**: 高コントラストな配色になる
- **入力値**: テーマ設定で「高コントラストモード」を選択
  - **入力データの意味**: 高コントラストテーマへの変更
- **期待される結果**:
  - 高コントラストな配色になる
  - テキストが明瞭に視認できる
  - **期待結果の理由**: REQ-803, REQ-5006で高コントラストモードが要求されている
- **テストの目的**: 高コントラストモード機能の確認
  - **確認ポイント**: コントラスト比の向上
- 🔵 信頼性レベル: 青信号 - REQ-803, REQ-5006に基づく

---

#### TC-E2E-087-011: 高コントラストモードでWCAG 2.1 AA準拠（コントラスト比4.5:1以上）

- **テスト名**: 高コントラストモードWCAG準拠確認
  - **何をテストするか**: 高コントラストモードでコントラスト比がWCAG 2.1 AAレベルを満たすこと
  - **期待される動作**: テキストと背景のコントラスト比が4.5:1以上
- **入力値**: 高コントラストモード有効時の配色
  - **入力データの意味**: アクセシビリティ基準の検証
- **期待される結果**:
  - 主要なテキストと背景のコントラスト比が4.5:1以上
  - ボタンラベルも同様のコントラスト比を満たす
  - **期待結果の理由**: REQ-5006でWCAG 2.1 AAレベル準拠が要求されている
- **テストの目的**: アクセシビリティ基準の確認
  - **確認ポイント**: コントラスト比の計算検証
- 🔵 信頼性レベル: 青信号 - REQ-5006に基づく

---

#### TC-E2E-087-012: テーマ変更が全画面に反映される

- **テスト名**: テーマ全画面反映
  - **何をテストするか**: テーマ変更が設定画面以外の画面にも反映されること
  - **期待される動作**: ホーム画面、文字盤画面、定型文画面等にテーマが適用される
- **入力値**: テーマ変更後、各画面を遷移
  - **入力データの意味**: 複数画面でのテーマ確認
- **期待される結果**:
  - すべての画面でテーマが統一されている
  - **期待結果の理由**: REQ-2008で全画面への反映が要求されている
- **テストの目的**: テーマの全画面適用確認
  - **確認ポイント**: 画面遷移後の配色維持
- 🔵 信頼性レベル: 青信号 - REQ-2008に基づく

---

### 3. TTS速度設定テスト

#### TC-E2E-087-013: TTS速度「遅い」への変更

- **テスト名**: TTS速度遅い変更
  - **何をテストするか**: TTS速度を「遅い」に変更すると読み上げ速度が遅くなること
  - **期待される動作**: 読み上げがゆっくりになる
- **入力値**: TTS速度設定で「遅い」を選択
  - **入力データの意味**: 最低速度への変更
- **期待される結果**:
  - 読み上げ速度が遅くなる
  - **期待結果の理由**: REQ-404でTTS速度設定が要求されている
- **テストの目的**: TTS速度変更機能の確認
  - **確認ポイント**: 速度変更の反映
- 🔵 信頼性レベル: 青信号 - REQ-404に基づく

---

#### TC-E2E-087-014: TTS速度「普通」への変更

- **テスト名**: TTS速度普通変更
  - **何をテストするか**: TTS速度を「普通」に変更すると読み上げ速度が標準になること
  - **期待される動作**: 読み上げが標準速度になる
- **入力値**: TTS速度設定で「普通」を選択
  - **入力データの意味**: 標準速度への変更
- **期待される結果**:
  - 読み上げ速度が標準になる
  - **期待結果の理由**: REQ-404でTTS速度設定が要求されている
- **テストの目的**: TTS速度変更機能の確認
  - **確認ポイント**: デフォルト速度への戻し
- 🔵 信頼性レベル: 青信号 - REQ-404に基づく

---

#### TC-E2E-087-015: TTS速度「速い」への変更

- **テスト名**: TTS速度速い変更
  - **何をテストするか**: TTS速度を「速い」に変更すると読み上げ速度が速くなること
  - **期待される動作**: 読み上げが速くなる
- **入力値**: TTS速度設定で「速い」を選択
  - **入力データの意味**: 最高速度への変更
- **期待される結果**:
  - 読み上げ速度が速くなる
  - **期待結果の理由**: REQ-404でTTS速度設定が要求されている
- **テストの目的**: TTS速度変更機能の確認
  - **確認ポイント**: 速度変更の反映
- 🔵 信頼性レベル: 青信号 - REQ-404に基づく

---

### 4. AI丁寧さレベル設定テスト

#### TC-E2E-087-016: AI丁寧さレベル「カジュアル」への変更

- **テスト名**: AI丁寧さレベルカジュアル変更
  - **何をテストするか**: AI丁寧さレベルを「カジュアル」に変更するとデフォルトで使用されること
  - **期待される動作**: AI変換時にカジュアルがデフォルトになる
- **入力値**: AI丁寧さレベル設定で「カジュアル」を選択
  - **入力データの意味**: カジュアルレベルへの変更
- **期待される結果**:
  - AI変換画面でカジュアルがデフォルト選択されている
  - **期待結果の理由**: REQ-903でAI丁寧さレベル設定が要求されている
- **テストの目的**: AI丁寧さレベル変更機能の確認
  - **確認ポイント**: デフォルト値の変更
- 🔵 信頼性レベル: 青信号 - REQ-903に基づく

---

#### TC-E2E-087-017: AI丁寧さレベル「普通」への変更

- **テスト名**: AI丁寧さレベル普通変更
  - **何をテストするか**: AI丁寧さレベルを「普通」に変更するとデフォルトで使用されること
  - **期待される動作**: AI変換時に普通がデフォルトになる
- **入力値**: AI丁寧さレベル設定で「普通」を選択
  - **入力データの意味**: 普通レベルへの変更
- **期待される結果**:
  - AI変換画面で普通がデフォルト選択されている
- **テストの目的**: AI丁寧さレベル変更機能の確認
  - **確認ポイント**: デフォルト値の変更
- 🔵 信頼性レベル: 青信号 - REQ-903に基づく

---

#### TC-E2E-087-018: AI丁寧さレベル「丁寧」への変更

- **テスト名**: AI丁寧さレベル丁寧変更
  - **何をテストするか**: AI丁寧さレベルを「丁寧」に変更するとデフォルトで使用されること
  - **期待される動作**: AI変換時に丁寧がデフォルトになる
- **入力値**: AI丁寧さレベル設定で「丁寧」を選択
  - **入力データの意味**: 丁寧レベルへの変更
- **期待される結果**:
  - AI変換画面で丁寧がデフォルト選択されている
  - **期待結果の理由**: REQ-903でAI丁寧さレベル設定が要求されている
- **テストの目的**: AI丁寧さレベル変更機能の確認
  - **確認ポイント**: デフォルト値の変更
- 🔵 信頼性レベル: 青信号 - REQ-903に基づく

---

### 5. 設定永続化テスト

#### TC-E2E-087-019: フォントサイズ設定の永続化

- **テスト名**: フォントサイズ永続化
  - **何をテストするか**: フォントサイズ設定がアプリ再起動後も保持されること
  - **期待される動作**: 再起動後も設定が維持される
- **入力値**: フォントサイズを「大」に変更 → アプリ再起動（シミュレート）
  - **入力データの意味**: 設定永続化の検証
- **期待される結果**:
  - 再起動後もフォントサイズが「大」のまま
  - **期待結果の理由**: NFR-101でローカルストレージ保存が要求されている
- **テストの目的**: 設定永続化の確認
  - **確認ポイント**: Hive保存・復元
- 🔵 信頼性レベル: 青信号 - NFR-101に基づく

---

#### TC-E2E-087-020: テーマ設定の永続化

- **テスト名**: テーマ永続化
  - **何をテストするか**: テーマ設定がアプリ再起動後も保持されること
  - **期待される動作**: 再起動後も設定が維持される
- **入力値**: テーマを「ダークモード」に変更 → アプリ再起動（シミュレート）
  - **入力データの意味**: 設定永続化の検証
- **期待される結果**:
  - 再起動後もテーマが「ダークモード」のまま
- **テストの目的**: 設定永続化の確認
  - **確認ポイント**: Hive保存・復元
- 🔵 信頼性レベル: 青信号 - NFR-101に基づく

---

#### TC-E2E-087-021: TTS速度設定の永続化

- **テスト名**: TTS速度永続化
  - **何をテストするか**: TTS速度設定がアプリ再起動後も保持されること
  - **期待される動作**: 再起動後も設定が維持される
- **入力値**: TTS速度を「遅い」に変更 → アプリ再起動（シミュレート）
  - **入力データの意味**: 設定永続化の検証
- **期待される結果**:
  - 再起動後もTTS速度が「遅い」のまま
- **テストの目的**: 設定永続化の確認
  - **確認ポイント**: Hive保存・復元
- 🔵 信頼性レベル: 青信号 - NFR-101に基づく

---

#### TC-E2E-087-022: AI丁寧さレベル設定の永続化

- **テスト名**: AI丁寧さレベル永続化
  - **何をテストするか**: AI丁寧さレベル設定がアプリ再起動後も保持されること
  - **期待される動作**: 再起動後も設定が維持される
- **入力値**: AI丁寧さレベルを「丁寧」に変更 → アプリ再起動（シミュレート）
  - **入力データの意味**: 設定永続化の検証
- **期待される結果**:
  - 再起動後もAI丁寧さレベルが「丁寧」のまま
- **テストの目的**: 設定永続化の確認
  - **確認ポイント**: Hive保存・復元
- 🔵 信頼性レベル: 青信号 - NFR-101に基づく

---

### 6. アクセシビリティテスト

#### TC-E2E-087-023: 設定画面のタップターゲットサイズ確認

- **テスト名**: タップターゲットサイズ確認
  - **何をテストするか**: 設定画面のタップターゲットが最小44px × 44pxを満たすこと
  - **期待される動作**: 各選択要素がタップしやすいサイズである
- **入力値**: 設定画面の各選択ボタンのサイズ
  - **入力データの意味**: アクセシビリティ基準の検証
- **期待される結果**:
  - タップターゲットサイズが44px × 44px以上
  - **期待結果の理由**: REQ-804でタップターゲットサイズが要求されている
- **テストの目的**: アクセシビリティ基準の確認
  - **確認ポイント**: ウィジェットサイズの検証
- 🔵 信頼性レベル: 青信号 - REQ-804に基づく

---

#### TC-E2E-087-024: 設定セクションの整理表示

- **テスト名**: 設定セクション表示確認
  - **何をテストするか**: 設定項目が適切にセクション分けされていること
  - **期待される動作**: 表示設定、音声設定、AI設定等がセクション分けされている
- **入力値**: 設定画面の構造
  - **入力データの意味**: UI構造の確認
- **期待される結果**:
  - セクションヘッダーが表示される
  - 関連する設定がグループ化されている
- **テストの目的**: UI構造の確認
  - **確認ポイント**: セクション分け、ラベル表示
- 🟡 信頼性レベル: 黄信号 - 実装から推測

---

### 7. 統合テストケース

#### TC-E2E-087-025: フォントサイズ変更 → 文字盤入力 → 読み上げフロー

- **テスト名**: フォントサイズ変更後の文字盤入力フロー
  - **何をテストするか**: フォントサイズ変更後も文字盤入力・読み上げが正常動作すること
  - **期待される動作**: 大きいフォントで文字盤入力し、読み上げできる
- **入力値**: フォントサイズ「大」→ 文字盤で「あ」入力 → 読み上げ
  - **入力データの意味**: 設定変更後の機能確認
- **期待される結果**:
  - 大きいフォントで文字盤が表示される
  - 入力・読み上げが正常動作する
- **テストの目的**: 機能間連携の確認
  - **確認ポイント**: 設定変更が他機能に悪影響を与えないこと
- 🔵 信頼性レベル: 青信号 - 機能連携テスト

---

#### TC-E2E-087-026: テーマ変更 → 緊急ボタン表示確認

- **テスト名**: テーマ変更後の緊急ボタン視認性
  - **何をテストするか**: 各テーマで緊急ボタンが適切に視認できること
  - **期待される動作**: ダークモード・高コントラストモードでも緊急ボタンが目立つ
- **入力値**: テーマ変更 → 緊急ボタン表示確認
  - **入力データの意味**: 重要UI要素の視認性確認
- **期待される結果**:
  - 各テーマで緊急ボタンが赤色で表示される
  - 緊急ボタンが他のボタンと区別できる
- **テストの目的**: 重要UI要素の視認性確認
  - **確認ポイント**: 緊急ボタンの目立ちやすさ
- 🟡 信頼性レベル: 黄信号 - ユーザビリティ考慮

---

## テストケースサマリー

| カテゴリ | テストケース数 | 信頼性レベル |
|---------|--------------|--------------|
| フォントサイズ設定 | 7 | 🔵 青信号 |
| テーマ設定 | 5 | 🔵 青信号 |
| TTS速度設定 | 3 | 🔵 青信号 |
| AI丁寧さレベル設定 | 3 | 🔵 青信号 |
| 設定永続化 | 4 | 🔵 青信号 |
| アクセシビリティ | 2 | 🔵/🟡 |
| 統合 | 2 | 🔵/🟡 |
| **合計** | **26** | |

---

## 品質判定

✅ **高品質**:
- テストケース分類: フォントサイズ・テーマ・TTS速度・AI丁寧さ・永続化・アクセシビリティ・統合が網羅されている
- 期待値定義: 各テストケースの期待値が明確に定義されている
- 技術選択: Dart/Flutter + integration_testで確定
- 実装可能性: 既存設定実装とE2Eテストパターンを活用可能

## 信頼性レベル

🔵 青信号 - EARS要件定義書（REQ-801〜803, REQ-2007, REQ-2008, REQ-5006, REQ-404, REQ-903）に基づくテストケース設計

---

次のお勧めステップ: `/tsumiki:tdd-red` でRedフェーズ（失敗テスト作成）を開始します。
