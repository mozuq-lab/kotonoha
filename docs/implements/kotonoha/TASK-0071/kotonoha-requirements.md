# TASK-0071: 設定画面UI実装 - 要件定義書

## 概要

設定画面（SettingsScreen）のUIを実装する。セクション分け、各設定項目の表示、設定変更時の即時反映を実現する。

## 信頼性レベル

🔵 **青信号** - EARS要件定義書（REQ-801, REQ-803, REQ-404, REQ-903）および interfaces.dart に明確に記載

## 関連要件

| 要件ID | 要件内容 | 信頼性 |
|--------|----------|--------|
| REQ-801 | フォントサイズを「小」「中」「大」の3段階から選択可能 | 🔵 |
| REQ-803 | 「ライトモード」「ダークモード」「高コントラストモード」の3つのテーマを提供 | 🔵 |
| REQ-404 | 読み上げ速度を「遅い」「普通」「速い」の3段階から選択可能 | 🔵 |
| REQ-903 | AI変換の丁寧さレベルを「カジュアル」「普通」「丁寧」の3段階から選択可能 | 🔵 |
| REQ-2007 | フォントサイズ変更時に即座にプレビュー反映 | 🔵 |
| REQ-2008 | テーマ変更時に即座にプレビュー反映 | 🔵 |

## 依存タスク

- TASK-0056: 設定保存（Hive/SharedPreferences）✅ 完了済み
- TASK-0049: TTS速度設定 ✅ 完了済み

## 機能要件

### 1. 設定画面レイアウト

- **FR-071-001**: SettingsScreenはセクション分けされた設定項目を表示すること
- **FR-071-002**: 「表示設定」セクションを設けること
- **FR-071-003**: 「音声設定」セクションを設けること
- **FR-071-004**: 「AI設定」セクションを設けること
- **FR-071-005**: 各セクションには明確なセクションヘッダーを表示すること

### 2. 表示設定セクション

- **FR-071-006**: フォントサイズ設定項目を表示すること（REQ-801）
- **FR-071-007**: テーマ設定項目を表示すること（REQ-803）

### 3. 音声設定セクション

- **FR-071-008**: TTS速度設定項目を表示すること（REQ-404）
  - 既存のTTSSpeedSettingsWidgetを再利用

### 4. AI設定セクション

- **FR-071-009**: AI丁寧さレベル設定項目を表示すること（REQ-903）

### 5. 設定変更の即時反映

- **FR-071-010**: フォントサイズ変更時に即座に全画面に反映されること（REQ-2007）
- **FR-071-011**: テーマ変更時に即座に全画面に反映されること（REQ-2008）

## 非機能要件

- **NFR-071-001**: 設定画面へのナビゲーションはスムーズであること
- **NFR-071-002**: 設定項目はアクセシビリティに配慮したタップターゲットサイズ（44px × 44px以上）であること
- **NFR-071-003**: 設定画面はスクロール可能であること

## UI設計

### セクション構成

```
┌─────────────────────────────────────┐
│           設定（AppBar）             │
├─────────────────────────────────────┤
│ 📱 表示設定                          │
│ ├─ フォントサイズ: [小] [中] [大]     │
│ └─ テーマ: [ライト] [ダーク] [高コン] │
├─────────────────────────────────────┤
│ 🔊 音声設定                          │
│ └─ 読み上げ速度: [遅い] [普通] [速い] │
├─────────────────────────────────────┤
│ 🤖 AI設定                            │
│ └─ 丁寧さレベル: [カジュアル] [普通] [丁寧] │
└─────────────────────────────────────┘
```

### ウィジェット構成

1. **SettingsScreen** - メイン画面（Scaffold + AppBar + ScrollView）
2. **SettingsSectionWidget** - セクションヘッダー + 子ウィジェット
3. **FontSizeSettingsWidget** - フォントサイズ選択UI
4. **ThemeSettingsWidget** - テーマ選択UI
5. **TTSSpeedSettingsWidget** - TTS速度選択UI（既存）
6. **AIPolitenessSettingsWidget** - AI丁寧さレベル選択UI

## 受け入れ基準

1. 設定画面が表示される
2. 各設定項目が正しく表示される（表示設定、音声設定、AI設定）
3. 設定がセクションごとに整理されている
4. 設定画面に簡単にアクセスできる
5. フォントサイズ設定で3段階から選択できる
6. テーマ設定で3種類から選択できる
7. TTS速度設定で3段階から選択できる
8. AI丁寧さレベル設定で3段階から選択できる

## 実装ファイル

| ファイルパス | 役割 |
|-------------|------|
| `lib/features/settings/presentation/settings_screen.dart` | 設定画面メイン（既存ファイルを拡張） |
| `lib/features/settings/presentation/widgets/settings_section_widget.dart` | セクションウィジェット（新規） |
| `lib/features/settings/presentation/widgets/font_size_settings_widget.dart` | フォントサイズ設定（新規） |
| `lib/features/settings/presentation/widgets/theme_settings_widget.dart` | テーマ設定（新規） |
| `lib/features/settings/presentation/widgets/ai_politeness_settings_widget.dart` | AI丁寧さレベル設定（新規） |
| `test/features/settings/presentation/settings_screen_test.dart` | 設定画面テスト（既存ファイルを拡張） |

## 更新履歴

- 2025-11-29: 要件定義書作成（TASK-0071）
