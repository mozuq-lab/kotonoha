# TASK-0078: エラーUI・エラーメッセージ実装 - テストケース

## テスト概要

- **タスクID**: TASK-0078
- **総テストケース数**: 11件
- **テストファイル**: `test/core/widgets/error_dialog_test.dart`

---

## 1. ErrorDialog 基本表示テスト

| TC-ID | テストケース名 | 前提条件 | テスト内容 | 期待結果 | 関連要件 |
|-------|---------------|----------|-----------|----------|----------|
| TC-078-001 | エラーダイアログにタイトルとメッセージが表示される | - | showErrorDialogを呼び出し | タイトル「エラー」とメッセージ「エラーが発生しました」が表示される | ERR-001 |
| TC-078-002 | OKボタンでダイアログが閉じる | ダイアログ表示中 | OKボタンをタップ | ダイアログが閉じる | ERR-003 |

---

## 2. 再試行オプションテスト

| TC-ID | テストケース名 | 前提条件 | テスト内容 | 期待結果 | 関連要件 |
|-------|---------------|----------|-----------|----------|----------|
| TC-078-003 | 再試行ボタンが表示される | showRetry=true | showErrorDialogを呼び出し | 「再試行」ボタンが表示される | ERR-004 |
| TC-078-004 | 再試行ボタンタップでコールバックが呼ばれる | 再試行ボタン表示中 | 再試行ボタンをタップ | onRetryコールバックが呼ばれる | ERR-005 |

---

## 3. ErrorSnackBar テスト

| TC-ID | テストケース名 | 前提条件 | テスト内容 | 期待結果 | 関連要件 |
|-------|---------------|----------|-----------|----------|----------|
| TC-078-005 | エラースナックバーが表示される | - | showErrorSnackBarを呼び出し | エラーメッセージがスナックバーに表示される | SB-001 |
| TC-078-006 | スナックバーに再試行ボタンが表示される | showRetry=true | showErrorSnackBarを呼び出し | 「再試行」ボタンが表示される | SB-002 |

---

## 4. NetworkErrorDialog テスト

| TC-ID | テストケース名 | 前提条件 | テスト内容 | 期待結果 | 関連要件 |
|-------|---------------|----------|-----------|----------|----------|
| TC-078-007 | ネットワークエラーダイアログが表示される | - | showNetworkErrorDialogを呼び出し | 「ネットワーク」を含むメッセージと「再試行」ボタンが表示される | NET-002, NET-003, EDGE-001 |

---

## 5. AIConversionErrorDialog テスト

| TC-ID | テストケース名 | 前提条件 | テスト内容 | 期待結果 | 関連要件 |
|-------|---------------|----------|-----------|----------|----------|
| TC-078-008 | AI変換エラーダイアログが表示される | - | showAIConversionErrorDialogを呼び出し | 「AI変換」を含むメッセージと「元のテキストを使用」ボタンが表示される | AI-001, AI-002, EDGE-002 |
| TC-078-009 | 元のテキストを使用ボタンでコールバックが呼ばれる | ダイアログ表示中 | 「元のテキストを使用」をタップ | onUseOriginalコールバックが呼ばれる | AI-004 |

---

## 6. TTSErrorDialog テスト

| TC-ID | テストケース名 | 前提条件 | テスト内容 | 期待結果 | 関連要件 |
|-------|---------------|----------|-----------|----------|----------|
| TC-078-010 | TTS再生エラーダイアログが表示される | - | showTTSErrorDialogを呼び出し | 「読み上げ」を含むメッセージが表示される | TTS-002, EDGE-004 |

---

## 7. 日本語メッセージテスト (NFR-204)

| TC-ID | テストケース名 | 前提条件 | テスト内容 | 期待結果 | 関連要件 |
|-------|---------------|----------|-----------|----------|----------|
| TC-078-011 | エラーメッセージが日本語で表示される | - | showNetworkErrorDialogを呼び出し | 日本語メッセージが表示され、英語（"Network", "Error"等）が含まれない | NFR-204, MSG-001 |

---

## テスト実行コマンド

```bash
# 全テスト実行
flutter test test/core/widgets/error_dialog_test.dart

# カバレッジ付きテスト実行
flutter test --coverage test/core/widgets/error_dialog_test.dart
```

## テスト対象関数

| 関数名 | 説明 | 関連要件 |
|--------|------|----------|
| showErrorDialog() | 汎用エラーダイアログ表示 | ERR-001〜005 |
| showErrorSnackBar() | エラースナックバー表示 | SB-001〜004 |
| showNetworkErrorDialog() | ネットワークエラーダイアログ表示 | NET-001〜005, EDGE-001 |
| showAIConversionErrorDialog() | AI変換エラーダイアログ表示 | AI-001〜004, EDGE-002 |
| showTTSErrorDialog() | TTS再生エラーダイアログ表示 | TTS-001〜004, EDGE-004 |
| ErrorMessages | エラーメッセージ定数クラス | MSG-001〜007, NFR-204 |

## テスト結果

```
11 tests passed
```
