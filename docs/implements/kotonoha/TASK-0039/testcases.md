# TDDテストケース定義書 - TASK-0039: 削除ボタン・全消去ボタン実装

## タスク情報

- **タスクID**: TASK-0039
- **タスク名**: 削除ボタン・全消去ボタン実装
- **対象コンポーネント**: `DeleteButton`, `ClearAllButton`, `ClearConfirmationDialog`
- **テストファイル**: `frontend/kotonoha_app/test/features/character_board/presentation/widgets/delete_button_test.dart`, `clear_all_button_test.dart`, `clear_confirmation_dialog_test.dart`
- **作成日**: 2025-11-22
- **フェーズ**: Phase 3 - Week 9, Day 3
- **依存タスク**: TASK-0038（文字入力バッファ管理 - 完了済み）

## 信頼性レベル凡例

- **:blue_circle: 青信号**: 要件定義書（EARS記法）・設計文書に基づく確実なテスト
- **:yellow_circle: 黄信号**: 要件定義書から妥当な推測によるテスト
- **:red_circle: 赤信号**: 要件定義書にない推測によるテスト

---

## 1. DeleteButton - 正常系テスト

### TC-039-001: 削除ボタンの表示確認

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-001 |
| **テスト名** | DeleteButtonが正しく表示されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-003, AC-001 |
| **前提条件** | DeleteButtonウィジェットがインポートされている |
| **テストステップ** | 1. DeleteButtonをレンダリングする<br>2. ボタンの表示を確認する |
| **期待結果** | 削除ボタンが画面上に表示される |
| **優先度** | P0: 必須 |

---

### TC-039-002: 削除ボタンタップでコールバックが発火する

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-002 |
| **テスト名** | DeleteButtonタップ時にonPressedコールバックが実行されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-003, AC-001 |
| **前提条件** | DeleteButtonがenabled状態 |
| **テストステップ** | 1. onPressedコールバックを設定したDeleteButtonをレンダリングする<br>2. ボタンをタップする<br>3. コールバックが呼ばれたことを確認する |
| **期待結果** | onPressedコールバックが1回実行される |
| **優先度** | P0: 必須 |

---

### TC-039-003: 有効状態の削除ボタン表示

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-003 |
| **テスト名** | enabled: trueの場合、削除ボタンが有効状態で表示されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | AC-005 |
| **前提条件** | なし |
| **テストステップ** | 1. enabled: trueでDeleteButtonをレンダリングする<br>2. ボタンの状態を確認する |
| **期待結果** | ボタンが有効状態（タップ可能）である |
| **優先度** | P0: 必須 |

---

### TC-039-004: 無効状態の削除ボタン表示

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-004 |
| **テスト名** | enabled: falseの場合、削除ボタンが無効状態で表示されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | AC-005, EDGE-1 |
| **前提条件** | なし |
| **テストステップ** | 1. enabled: falseでDeleteButtonをレンダリングする<br>2. ボタンの状態を確認する |
| **期待結果** | ボタンが無効状態（グレーアウト）である |
| **優先度** | P0: 必須 |

---

### TC-039-005: 無効状態の削除ボタンタップは無視される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-005 |
| **テスト名** | enabled: falseの場合、タップしてもコールバックが実行されないことを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | AC-005, EDGE-1, AC-011 |
| **前提条件** | なし |
| **テストステップ** | 1. enabled: falseでDeleteButtonをレンダリングする<br>2. ボタンをタップする<br>3. コールバックが呼ばれていないことを確認する |
| **期待結果** | onPressedコールバックが実行されない |
| **優先度** | P0: 必須 |

---

## 2. DeleteButton - サイズ・アクセシビリティテスト

### TC-039-006: 削除ボタンのサイズが44x44px以上

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-006 |
| **テスト名** | DeleteButtonのタップターゲットが44x44px以上であることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-5001, AC-008 |
| **前提条件** | なし |
| **テストステップ** | 1. DeleteButtonをレンダリングする<br>2. ボタンのサイズを取得する<br>3. サイズが44x44px以上であることを確認する |
| **期待結果** | width >= 44.0, height >= 44.0 |
| **優先度** | P0: 必須 |

---

### TC-039-007: 削除ボタンにSemanticsラベルが設定されている

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-007 |
| **テスト名** | DeleteButtonにアクセシビリティ用のSemanticsラベルが設定されていることを確認 |
| **信頼性レベル** | :yellow_circle: |
| **関連要件** | NFR-202 |
| **前提条件** | なし |
| **テストステップ** | 1. DeleteButtonをレンダリングする<br>2. Semanticsラベルを確認する |
| **期待結果** | 「削除」または「1文字削除」等の適切なラベルが設定されている |
| **優先度** | P1: 重要 |

---

## 3. ClearAllButton - 正常系テスト

### TC-039-008: 全消去ボタンの表示確認

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-008 |
| **テスト名** | ClearAllButtonが正しく表示されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-004, AC-002 |
| **前提条件** | ClearAllButtonウィジェットがインポートされている |
| **テストステップ** | 1. ClearAllButtonをレンダリングする<br>2. ボタンの表示を確認する |
| **期待結果** | 全消去ボタンが画面上に表示される |
| **優先度** | P0: 必須 |

---

### TC-039-009: 全消去ボタンが警告色で表示される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-009 |
| **テスト名** | ClearAllButtonが警告色（赤系）で表示されることを確認 |
| **信頼性レベル** | :yellow_circle: |
| **関連要件** | AC-010 |
| **前提条件** | なし |
| **テストステップ** | 1. ClearAllButtonをレンダリングする<br>2. ボタンの背景色を確認する |
| **期待結果** | ボタンが警告色（赤系、error color）で表示される |
| **優先度** | P1: 重要 |

---

### TC-039-010: 全消去ボタンタップで確認ダイアログが表示される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-010 |
| **テスト名** | ClearAllButtonタップ時に確認ダイアログが表示されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-2001, REQ-5002, AC-002 |
| **前提条件** | ClearAllButtonがenabled状態 |
| **テストステップ** | 1. ClearAllButtonをレンダリングする<br>2. ボタンをタップする<br>3. 確認ダイアログが表示されることを確認する |
| **期待結果** | ClearConfirmationDialogが表示される |
| **優先度** | P0: 必須 |

---

### TC-039-011: 有効状態の全消去ボタン表示

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-011 |
| **テスト名** | enabled: trueの場合、全消去ボタンが有効状態で表示されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | AC-006 |
| **前提条件** | なし |
| **テストステップ** | 1. enabled: trueでClearAllButtonをレンダリングする<br>2. ボタンの状態を確認する |
| **期待結果** | ボタンが有効状態（タップ可能）である |
| **優先度** | P0: 必須 |

---

### TC-039-012: 無効状態の全消去ボタン表示

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-012 |
| **テスト名** | enabled: falseの場合、全消去ボタンが無効状態で表示されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | AC-006, EDGE-2 |
| **前提条件** | なし |
| **テストステップ** | 1. enabled: falseでClearAllButtonをレンダリングする<br>2. ボタンの状態を確認する |
| **期待結果** | ボタンが無効状態（グレーアウト）である |
| **優先度** | P0: 必須 |

---

### TC-039-013: 無効状態の全消去ボタンタップは無視される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-013 |
| **テスト名** | enabled: falseの場合、タップしても確認ダイアログが表示されないことを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | AC-006, EDGE-2 |
| **前提条件** | なし |
| **テストステップ** | 1. enabled: falseでClearAllButtonをレンダリングする<br>2. ボタンをタップする<br>3. 確認ダイアログが表示されていないことを確認する |
| **期待結果** | 確認ダイアログが表示されない |
| **優先度** | P0: 必須 |

---

## 4. ClearAllButton - サイズ・アクセシビリティテスト

### TC-039-014: 全消去ボタンのサイズが44x44px以上

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-014 |
| **テスト名** | ClearAllButtonのタップターゲットが44x44px以上であることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-5001, AC-008 |
| **前提条件** | なし |
| **テストステップ** | 1. ClearAllButtonをレンダリングする<br>2. ボタンのサイズを取得する<br>3. サイズが44x44px以上であることを確認する |
| **期待結果** | width >= 44.0, height >= 44.0 |
| **優先度** | P0: 必須 |

---

### TC-039-015: 全消去ボタンにSemanticsラベルが設定されている

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-015 |
| **テスト名** | ClearAllButtonにアクセシビリティ用のSemanticsラベルが設定されていることを確認 |
| **信頼性レベル** | :yellow_circle: |
| **関連要件** | NFR-202 |
| **前提条件** | なし |
| **テストステップ** | 1. ClearAllButtonをレンダリングする<br>2. Semanticsラベルを確認する |
| **期待結果** | 「全消去」等の適切なラベルが設定されている |
| **優先度** | P1: 重要 |

---

## 5. ClearConfirmationDialog - 表示テスト

### TC-039-016: 確認ダイアログの表示確認

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-016 |
| **テスト名** | ClearConfirmationDialogが正しく表示されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-2001, AC-002 |
| **前提条件** | ClearConfirmationDialogウィジェットがインポートされている |
| **テストステップ** | 1. ClearConfirmationDialogを表示する<br>2. ダイアログの表示を確認する |
| **期待結果** | 確認ダイアログが画面上に表示される |
| **優先度** | P0: 必須 |

---

### TC-039-017: 確認ダイアログにタイトル「確認」が表示される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-017 |
| **テスト名** | ClearConfirmationDialogにタイトル「確認」が表示されることを確認 |
| **信頼性レベル** | :yellow_circle: |
| **関連要件** | REQ-2001 |
| **前提条件** | なし |
| **テストステップ** | 1. ClearConfirmationDialogを表示する<br>2. タイトルテキストを確認する |
| **期待結果** | 「確認」というタイトルが表示される |
| **優先度** | P1: 重要 |

---

### TC-039-018: 確認ダイアログにメッセージが表示される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-018 |
| **テスト名** | ClearConfirmationDialogに「入力内容をすべて消去しますか？」が表示されることを確認 |
| **信頼性レベル** | :yellow_circle: |
| **関連要件** | REQ-2001 |
| **前提条件** | なし |
| **テストステップ** | 1. ClearConfirmationDialogを表示する<br>2. メッセージテキストを確認する |
| **期待結果** | 「入力内容をすべて消去しますか？」というメッセージが表示される |
| **優先度** | P1: 重要 |

---

### TC-039-019: 確認ダイアログに「はい」ボタンが表示される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-019 |
| **テスト名** | ClearConfirmationDialogに「はい」ボタンが表示されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-2001, AC-003 |
| **前提条件** | なし |
| **テストステップ** | 1. ClearConfirmationDialogを表示する<br>2. 「はい」ボタンの表示を確認する |
| **期待結果** | 「はい」ボタンが表示される |
| **優先度** | P0: 必須 |

---

### TC-039-020: 確認ダイアログに「いいえ」ボタンが表示される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-020 |
| **テスト名** | ClearConfirmationDialogに「いいえ」ボタンが表示されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-2001, AC-004 |
| **前提条件** | なし |
| **テストステップ** | 1. ClearConfirmationDialogを表示する<br>2. 「いいえ」ボタンの表示を確認する |
| **期待結果** | 「いいえ」ボタンが表示される |
| **優先度** | P0: 必須 |

---

## 6. ClearConfirmationDialog - インタラクションテスト

### TC-039-021: 「はい」ボタンタップでonConfirmedコールバックが実行される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-021 |
| **テスト名** | 「はい」ボタンタップ時にonConfirmedコールバックが実行されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-2001, AC-003 |
| **前提条件** | ClearConfirmationDialogが表示されている |
| **テストステップ** | 1. ClearConfirmationDialogを表示する<br>2. 「はい」ボタンをタップする<br>3. onConfirmedコールバックが呼ばれたことを確認する |
| **期待結果** | onConfirmedコールバックが1回実行される |
| **優先度** | P0: 必須 |

---

### TC-039-022: 「はい」ボタンタップでダイアログが閉じる

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-022 |
| **テスト名** | 「はい」ボタンタップ後にダイアログが閉じることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-2001, AC-003 |
| **前提条件** | ClearConfirmationDialogが表示されている |
| **テストステップ** | 1. ClearConfirmationDialogを表示する<br>2. 「はい」ボタンをタップする<br>3. ダイアログが閉じたことを確認する |
| **期待結果** | ダイアログが画面から消える |
| **優先度** | P0: 必須 |

---

### TC-039-023: 「いいえ」ボタンタップでonCancelledコールバックが実行される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-023 |
| **テスト名** | 「いいえ」ボタンタップ時にonCancelledコールバックが実行されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-2001, AC-004 |
| **前提条件** | ClearConfirmationDialogが表示されている |
| **テストステップ** | 1. ClearConfirmationDialogを表示する<br>2. 「いいえ」ボタンをタップする<br>3. onCancelledコールバックが呼ばれたことを確認する |
| **期待結果** | onCancelledコールバックが1回実行される |
| **優先度** | P0: 必須 |

---

### TC-039-024: 「いいえ」ボタンタップでダイアログが閉じる

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-024 |
| **テスト名** | 「いいえ」ボタンタップ後にダイアログが閉じることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-2001, AC-004 |
| **前提条件** | ClearConfirmationDialogが表示されている |
| **テストステップ** | 1. ClearConfirmationDialogを表示する<br>2. 「いいえ」ボタンをタップする<br>3. ダイアログが閉じたことを確認する |
| **期待結果** | ダイアログが画面から消える |
| **優先度** | P0: 必須 |

---

### TC-039-025: ダイアログ外タップでダイアログが閉じない（モーダル）

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-025 |
| **テスト名** | ダイアログ外をタップしてもダイアログが閉じないことを確認（barrierDismissible: false）|
| **信頼性レベル** | :yellow_circle: |
| **関連要件** | REQ-5002, AC-013 |
| **前提条件** | ClearConfirmationDialogが表示されている |
| **テストステップ** | 1. ClearConfirmationDialogを表示する<br>2. ダイアログ外（バリア部分）をタップする<br>3. ダイアログがまだ表示されていることを確認する |
| **期待結果** | ダイアログが閉じずに表示され続ける |
| **優先度** | P1: 重要 |

---

## 7. ClearConfirmationDialog - アクセシビリティテスト

### TC-039-026: ダイアログの「はい」ボタンサイズが44x44px以上

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-026 |
| **テスト名** | ダイアログの「はい」ボタンのタップターゲットが44x44px以上であることを確認 |
| **信頼性レベル** | :yellow_circle: |
| **関連要件** | REQ-5001, AC-008 |
| **前提条件** | ClearConfirmationDialogが表示されている |
| **テストステップ** | 1. ClearConfirmationDialogを表示する<br>2. 「はい」ボタンのサイズを取得する<br>3. サイズが44x44px以上であることを確認する |
| **期待結果** | width >= 44.0, height >= 44.0 |
| **優先度** | P1: 重要 |

---

### TC-039-027: ダイアログの「いいえ」ボタンサイズが44x44px以上

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-027 |
| **テスト名** | ダイアログの「いいえ」ボタンのタップターゲットが44x44px以上であることを確認 |
| **信頼性レベル** | :yellow_circle: |
| **関連要件** | REQ-5001, AC-008 |
| **前提条件** | ClearConfirmationDialogが表示されている |
| **テストステップ** | 1. ClearConfirmationDialogを表示する<br>2. 「いいえ」ボタンのサイズを取得する<br>3. サイズが44x44px以上であることを確認する |
| **期待結果** | width >= 44.0, height >= 44.0 |
| **優先度** | P1: 重要 |

---

## 8. 統合テスト - InputBufferNotifierとの連携

### TC-039-028: 削除ボタンタップで最後の1文字が削除される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-028 |
| **テスト名** | 削除ボタンタップ時にInputBufferNotifier.deleteLastCharacter()が呼ばれ、最後の1文字が削除されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-003, AC-001 |
| **前提条件** | InputBufferNotifierに'こんにちは'が設定されている |
| **テストステップ** | 1. InputBufferNotifierに'こんにちは'を設定する<br>2. DeleteButtonをタップする<br>3. 入力バッファが'こんにち'になることを確認する |
| **期待結果** | 入力バッファが'こんにち'である |
| **優先度** | P0: 必須 |

---

### TC-039-029: 入力バッファが空の場合、削除ボタンが無効化される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-029 |
| **テスト名** | 入力バッファが空の場合、削除ボタンが無効化されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | AC-005, EDGE-1 |
| **前提条件** | InputBufferNotifierが空の状態 |
| **テストステップ** | 1. 入力バッファが空の状態でUIをレンダリングする<br>2. 削除ボタンの状態を確認する |
| **期待結果** | 削除ボタンが無効状態（enabled: false）である |
| **優先度** | P0: 必須 |

---

### TC-039-030: 入力バッファに文字がある場合、削除ボタンが有効化される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-030 |
| **テスト名** | 入力バッファに文字がある場合、削除ボタンが有効化されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | AC-005 |
| **前提条件** | InputBufferNotifierに文字が設定されている |
| **テストステップ** | 1. InputBufferNotifierに'あ'を設定する<br>2. UIをレンダリングする<br>3. 削除ボタンの状態を確認する |
| **期待結果** | 削除ボタンが有効状態（enabled: true）である |
| **優先度** | P0: 必須 |

---

### TC-039-031: 全消去確認後にバッファがクリアされる

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-031 |
| **テスト名** | 全消去ボタンタップ→確認ダイアログで「はい」選択後、InputBufferNotifier.clear()が呼ばれバッファがクリアされることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-004, REQ-2001, AC-003 |
| **前提条件** | InputBufferNotifierに'おはようございます'が設定されている |
| **テストステップ** | 1. InputBufferNotifierに'おはようございます'を設定する<br>2. ClearAllButtonをタップする<br>3. 確認ダイアログで「はい」をタップする<br>4. 入力バッファが空になることを確認する |
| **期待結果** | 入力バッファが''（空文字列）である |
| **優先度** | P0: 必須 |

---

### TC-039-032: 全消去キャンセル後にバッファが変更されない

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-032 |
| **テスト名** | 全消去ボタンタップ→確認ダイアログで「いいえ」選択後、バッファが変更されないことを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | REQ-2001, AC-004 |
| **前提条件** | InputBufferNotifierに'おはようございます'が設定されている |
| **テストステップ** | 1. InputBufferNotifierに'おはようございます'を設定する<br>2. ClearAllButtonをタップする<br>3. 確認ダイアログで「いいえ」をタップする<br>4. 入力バッファが変更されていないことを確認する |
| **期待結果** | 入力バッファが'おはようございます'のまま |
| **優先度** | P0: 必須 |

---

### TC-039-033: 入力バッファが空の場合、全消去ボタンが無効化される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-033 |
| **テスト名** | 入力バッファが空の場合、全消去ボタンが無効化されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | AC-006, EDGE-2 |
| **前提条件** | InputBufferNotifierが空の状態 |
| **テストステップ** | 1. 入力バッファが空の状態でUIをレンダリングする<br>2. 全消去ボタンの状態を確認する |
| **期待結果** | 全消去ボタンが無効状態（enabled: false）である |
| **優先度** | P0: 必須 |

---

### TC-039-034: 入力バッファに文字がある場合、全消去ボタンが有効化される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-034 |
| **テスト名** | 入力バッファに文字がある場合、全消去ボタンが有効化されることを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | AC-006 |
| **前提条件** | InputBufferNotifierに文字が設定されている |
| **テストステップ** | 1. InputBufferNotifierに'あ'を設定する<br>2. UIをレンダリングする<br>3. 全消去ボタンの状態を確認する |
| **期待結果** | 全消去ボタンが有効状態（enabled: true）である |
| **優先度** | P0: 必須 |

---

## 9. エッジケーステスト

### TC-039-035: 連続削除で正しく文字が削除される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-035 |
| **テスト名** | 削除ボタンを連続タップしても正しく文字が削除されることを確認 |
| **信頼性レベル** | :yellow_circle: |
| **関連要件** | AC-012, EDGE-3 |
| **前提条件** | InputBufferNotifierに'あいう'が設定されている |
| **テストステップ** | 1. InputBufferNotifierに'あいう'を設定する<br>2. 削除ボタンを3回連続タップする<br>3. 入力バッファが空になることを確認する |
| **期待結果** | 1回目: 'あい', 2回目: 'あ', 3回目: '' |
| **優先度** | P1: 重要 |

---

### TC-039-036: 空バッファで削除ボタンをタップしてもエラーにならない

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-036 |
| **テスト名** | 空バッファの状態で削除ボタンをタップしてもエラーが発生しないことを確認 |
| **信頼性レベル** | :blue_circle: |
| **関連要件** | AC-011 |
| **前提条件** | InputBufferNotifierが空の状態、削除ボタンが無効化されている |
| **テストステップ** | 1. 入力バッファが空の状態でUIをレンダリングする<br>2. 削除ボタンの状態を確認する（無効化されているはず）<br>3. エラーが発生していないことを確認する |
| **期待結果** | エラーが発生せず、バッファが空のまま |
| **優先度** | P0: 必須 |

---

## 10. テーマ対応テスト

### TC-039-037: ライトテーマで削除ボタンが適切に表示される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-037 |
| **テスト名** | ライトテーマで削除ボタンが適切な色で表示されることを確認 |
| **信頼性レベル** | :yellow_circle: |
| **関連要件** | REQ-803, AC-009 |
| **前提条件** | ライトテーマが適用されている |
| **テストステップ** | 1. ライトテーマでDeleteButtonをレンダリングする<br>2. ボタンの色を確認する |
| **期待結果** | ライトテーマに適した色で表示される |
| **優先度** | P1: 重要 |

---

### TC-039-038: ダークテーマで削除ボタンが適切に表示される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-038 |
| **テスト名** | ダークテーマで削除ボタンが適切な色で表示されることを確認 |
| **信頼性レベル** | :yellow_circle: |
| **関連要件** | REQ-803, AC-009 |
| **前提条件** | ダークテーマが適用されている |
| **テストステップ** | 1. ダークテーマでDeleteButtonをレンダリングする<br>2. ボタンの色を確認する |
| **期待結果** | ダークテーマに適した色で表示される |
| **優先度** | P1: 重要 |

---

### TC-039-039: 高コントラストテーマで削除ボタンが適切に表示される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-039 |
| **テスト名** | 高コントラストテーマで削除ボタンが適切な色で表示されることを確認 |
| **信頼性レベル** | :yellow_circle: |
| **関連要件** | REQ-803, REQ-5006, AC-009 |
| **前提条件** | 高コントラストテーマが適用されている |
| **テストステップ** | 1. 高コントラストテーマでDeleteButtonをレンダリングする<br>2. ボタンの色を確認する |
| **期待結果** | 高コントラストテーマに適した色（WCAG 2.1 AA準拠）で表示される |
| **優先度** | P1: 重要 |

---

### TC-039-040: 各テーマで全消去ボタンが警告色で表示される

| 項目 | 内容 |
|------|------|
| **テストケースID** | TC-039-040 |
| **テスト名** | ライト/ダーク/高コントラストテーマで全消去ボタンが警告色で表示されることを確認 |
| **信頼性レベル** | :yellow_circle: |
| **関連要件** | REQ-803, AC-009, AC-010 |
| **前提条件** | なし |
| **テストステップ** | 1. 各テーマでClearAllButtonをレンダリングする<br>2. ボタンの色が警告色（赤系）であることを確認する |
| **期待結果** | どのテーマでも警告色（error color）で表示される |
| **優先度** | P1: 重要 |

---

## 5. テストカバレッジマトリクス

| テストケースID | 正常系 | 異常系 | 境界値 | エッジケース | 関連要件 |
|---------------|--------|--------|--------|------------|----------|
| TC-039-001 | x | | | | REQ-003 |
| TC-039-002 | x | | | | REQ-003 |
| TC-039-003 | x | | | | AC-005 |
| TC-039-004 | | | | x | AC-005, EDGE-1 |
| TC-039-005 | | | | x | AC-005, EDGE-1 |
| TC-039-006 | x | | | | REQ-5001 |
| TC-039-007 | x | | | | NFR-202 |
| TC-039-008 | x | | | | REQ-004 |
| TC-039-009 | x | | | | AC-010 |
| TC-039-010 | x | | | | REQ-2001, REQ-5002 |
| TC-039-011 | x | | | | AC-006 |
| TC-039-012 | | | | x | AC-006, EDGE-2 |
| TC-039-013 | | | | x | AC-006, EDGE-2 |
| TC-039-014 | x | | | | REQ-5001 |
| TC-039-015 | x | | | | NFR-202 |
| TC-039-016 | x | | | | REQ-2001 |
| TC-039-017 | x | | | | REQ-2001 |
| TC-039-018 | x | | | | REQ-2001 |
| TC-039-019 | x | | | | REQ-2001 |
| TC-039-020 | x | | | | REQ-2001 |
| TC-039-021 | x | | | | REQ-2001 |
| TC-039-022 | x | | | | REQ-2001 |
| TC-039-023 | x | | | | REQ-2001 |
| TC-039-024 | x | | | | REQ-2001 |
| TC-039-025 | | | | x | REQ-5002 |
| TC-039-026 | x | | | | REQ-5001 |
| TC-039-027 | x | | | | REQ-5001 |
| TC-039-028 | x | | | | REQ-003 |
| TC-039-029 | | | | x | AC-005, EDGE-1 |
| TC-039-030 | x | | | | AC-005 |
| TC-039-031 | x | | | | REQ-004, REQ-2001 |
| TC-039-032 | x | | | | REQ-2001 |
| TC-039-033 | | | | x | AC-006, EDGE-2 |
| TC-039-034 | x | | | | AC-006 |
| TC-039-035 | | | | x | AC-012, EDGE-3 |
| TC-039-036 | | x | | | AC-011 |
| TC-039-037 | x | | | | REQ-803 |
| TC-039-038 | x | | | | REQ-803 |
| TC-039-039 | x | | | | REQ-803, REQ-5006 |
| TC-039-040 | x | | | | REQ-803, AC-010 |

---

## 6. 要件カバレッジ

| 要件ID | テストケースID | カバレッジ |
|--------|---------------|-----------|
| REQ-003 | TC-039-001, TC-039-002, TC-039-028 | 100% |
| REQ-004 | TC-039-008, TC-039-031 | 100% |
| REQ-2001 | TC-039-010, TC-039-016〜TC-039-024, TC-039-031, TC-039-032 | 100% |
| REQ-5001 | TC-039-006, TC-039-014, TC-039-026, TC-039-027 | 100% |
| REQ-5002 | TC-039-010, TC-039-025 | 100% |
| REQ-803 | TC-039-037, TC-039-038, TC-039-039, TC-039-040 | 100% |
| REQ-5006 | TC-039-039 | 100% |
| NFR-202 | TC-039-007, TC-039-015 | 100% |
| AC-001 | TC-039-001, TC-039-002, TC-039-028 | 100% |
| AC-002 | TC-039-008, TC-039-010, TC-039-016 | 100% |
| AC-003 | TC-039-019, TC-039-021, TC-039-022, TC-039-031 | 100% |
| AC-004 | TC-039-020, TC-039-023, TC-039-024, TC-039-032 | 100% |
| AC-005 | TC-039-003, TC-039-004, TC-039-005, TC-039-029, TC-039-030 | 100% |
| AC-006 | TC-039-011, TC-039-012, TC-039-013, TC-039-033, TC-039-034 | 100% |
| AC-008 | TC-039-006, TC-039-014, TC-039-026, TC-039-027 | 100% |
| AC-009 | TC-039-037, TC-039-038, TC-039-039, TC-039-040 | 100% |
| AC-010 | TC-039-009, TC-039-040 | 100% |
| AC-011 | TC-039-005, TC-039-036 | 100% |
| AC-012 | TC-039-035 | 100% |
| AC-013 | TC-039-025 | 100% |
| EDGE-1 | TC-039-004, TC-039-005, TC-039-029 | 100% |
| EDGE-2 | TC-039-012, TC-039-013, TC-039-033 | 100% |
| EDGE-3 | TC-039-035 | 100% |

---

## 7. テスト優先度サマリー

| 優先度 | テストケース数 | 説明 |
|--------|---------------|------|
| P0: 必須 | 26件 | 機能要件の核となるテスト。リリース前に必ずパスが必要 |
| P1: 重要 | 14件 | アクセシビリティ・テーマ対応など品質に関わるテスト |
| P2: あれば良い | 0件 | - |

---

## 8. 次のステップ

### 推奨コマンド

次は `/tsumiki:tdd-red` でテストコード（失敗するテスト）を作成します。

### テストファイル配置

```
frontend/kotonoha_app/test/
└── features/
    └── character_board/
        └── presentation/
            └── widgets/
                ├── delete_button_test.dart            # DeleteButtonテスト
                ├── clear_all_button_test.dart         # ClearAllButtonテスト
                └── clear_confirmation_dialog_test.dart # ClearConfirmationDialogテスト
```

### 実装ファイル配置（Green フェーズで作成）

```
frontend/kotonoha_app/lib/
└── features/
    └── character_board/
        └── presentation/
            └── widgets/
                ├── delete_button.dart              # DeleteButton
                ├── clear_all_button.dart           # ClearAllButton
                └── clear_confirmation_dialog.dart  # ClearConfirmationDialog
```

---

## 更新履歴

- **2025-11-22**: テストケース定義書作成
  - 要件定義書（requirements.md）に基づいて40個のテストケースを洗い出し
  - 正常系26件、異常系1件、エッジケース13件
  - 信頼性レベル（:blue_circle::yellow_circle:）を各テストケースに付与
  - 要件カバレッジマトリクスを作成
  - TASK-0038テストケース形式に準拠
